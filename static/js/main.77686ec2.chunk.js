(this.webpackJsonplog0107=this.webpackJsonplog0107||[]).push([[0],{100:function(e,t,n){e.exports={container:"normalNavigator_container__155OS",content:"normalNavigator_content__3QptO"}},107:function(e,t,n){e.exports={container:"alia_container__3sOFO"}},108:function(e,t,n){e.exports={container:"log_container__1snyH"}},111:function(e,t,n){e.exports={container:"logCommentCreate_container__3qGs1"}},112:function(e,t,n){e.exports={textarea:"logCommentEditor_textarea__ltzcQ",container:"logCommentEditor_container__3s0iH",buttonWrap:"logCommentEditor_buttonWrap__o5tot"}},113:function(e,t,n){e.exports={container:"logCreate_container__19vSt"}},114:function(e,t,n){e.exports={textarea:"logEditor_textarea__28vya",container:"logEditor_container__1GeHV"}},148:function(e,t,n){e.exports=n(291)},153:function(e,t,n){},26:function(e,t,n){e.exports={comments:"logComments_comments__1LjH6",comment:"logComments_comment__GP3sS",commentTime:"logComments_commentTime__3ccqY",commentMeta:"logComments_commentMeta__2p6gN",commentMetaItem:"logComments_commentMetaItem__2-ZM7"}},291:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(18),c=n.n(r),i=(n(153),n(28)),l=n(32),u=n(8),m=n(12),s=n.n(m),d=n(21),f=n(65),p=n.n(f),E=n(295),g=function(){return"/l"},_=function(){return"/l/l"},h=function(e){return"/l/d/".concat(e)},O=function(e){return"/l/a/".concat(e)},v=n(100),b=n.n(v),x=n(39),y=n.n(x);function T(e){var t=e.actions,n=void 0===t?null:t,a=Object(l.g)();return o.a.createElement(E.k,{fixedToTop:!0,style:{userSelect:"none"}},o.a.createElement("div",{className:b.a.container},o.a.createElement(E.k.Group,{align:"left"},o.a.createElement(E.k.Heading,null,o.a.createElement("h3",null,"<HeroBook />")),o.a.createElement(E.a,{icon:"home",minimal:!0,text:"Home",onClick:function(){a.push(g())}}),o.a.createElement(E.a,{icon:"book",minimal:!0,text:"List",onClick:function(){a.push(_())}}),o.a.createElement(E.a,{text:"Today",minimal:!0,icon:"pin",onClick:function(){a.push(O(y()(Date.now()).format("YYYYMMDD")))}})),n&&o.a.createElement(E.k.Group,{align:"right"},n)))}var w=function(e){return o.a.createElement("div",{className:p.a.container},o.a.createElement(T,{actions:e.actions}),o.a.createElement("div",{className:p.a.body},e.children))},C=n(51),N=new(n(105).a)("EfficientDatabase");N.version(1).stores({logs:"++id, content, time"}),N.version(2).stores({logComments:"++id, content, time, lid"}),N.version(3).stores({textToIdMap:"++id, &text, lid"});var S=N,k=n(106),j=n.n(k).a.create({timeout:3e3,headers:{"Content-Type":"application/x-www-form-urlencoded",token:window.localStorage.getItem("HERO_BOOK_SETTING_DATA_REMOTE_TOKEN")||""}}),I=n(19),B=n.n(I),D=window.localStorage.getItem("HERO_BOOK_SETTING_DATA_REMOTE_URL")||"/",R={get:function(e){return j.post(D,B.a.stringify({action:"logs.get",payload:JSON.stringify({id:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},add:function(e){return j.post(D,B.a.stringify({action:"logs.add",payload:JSON.stringify({content:e.content})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},del:function(e){return j.post(D,B.a.stringify({action:"logs.del",payload:JSON.stringify({id:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},upd:function(e,t){return j.post(D,B.a.stringify({action:"logs.upd",payload:JSON.stringify({id:e,content:t.content})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},all:function(){return j.post(D,B.a.stringify({action:"logs.all",payload:JSON.stringify({})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))}},A="2"===window.localStorage.getItem("HERO_BOOK_SETTING_DATA_SOURCE")?R:{get:function(e){return S.logs.get(Number(e))},add:function(e){return S.logs.add(Object(C.a)({},e,{time:new Date}))},del:function(e){return S.logs.delete(Number(e))},upd:function(e,t){return S.logs.update(Number(e),t)},all:function(){return S.logs.orderBy("time").toArray().then((function(e){return e.reverse()}))}},M=window.localStorage.getItem("HERO_BOOK_SETTING_DATA_REMOTE_URL")||"/",H={findMapByText:function(e){return j.post(M,B.a.stringify({action:"textToIdMap.findMapByText",payload:JSON.stringify({text:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},link:function(e,t){return j.post(M,B.a.stringify({action:"textToIdMap.link",payload:JSON.stringify({text:e,lid:t})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},relink:function(e,t){return j.post(M,B.a.stringify({action:"textToIdMap.relink",payload:JSON.stringify({text:e,lid:t})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))}},G="2"===window.localStorage.getItem("HERO_BOOK_SETTING_DATA_SOURCE")?H:{findMapByText:function(e){return S.textToIdMap.where({text:e}).first((function(e){return e})).catch((function(){return null}))},link:function(e,t){return S.textToIdMap.add({text:e,lid:t})},relink:function(e,t){return S.textToIdMap.where({text:e}).first((function(e){return S.textToIdMap.update(e.id,{lid:t})}))}},K=n(107),L=n.n(K),U=n(15),J=E.s.create({className:"recipe-toaster",position:U.a.TOP}),P=function(){return!1},Y=function(e){return new Promise((function(t){setTimeout(t,e)}))},q=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,o="","m"===t&&(o="\u7f8e\u597d\u7684\u4e00\u5929\uff01"),e.prev=3,e.next=6,A.add({content:o||t+"\n---\n"});case 6:return a=e.sent,e.next=9,G.link(t,a);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),J.show({timeout:2e3,message:e.t0.message,intent:"danger"}),n=!1;case 15:return e.abrupt("return",n?a:null);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(s.a.mark((function e(t){var n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,o="","m"===t&&(o="\u7f8e\u597d\u7684\u4e00\u5929\uff01"),e.prev=3,e.next=6,A.add({content:o||t+"\n---\n"});case 6:return a=e.sent,e.next=9,G.relink(t,a);case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),J.show({timeout:2e3,message:e.t0.message,intent:"danger"}),n=!1;case 15:return e.abrupt("return",n?a:null);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();function F(){var e=Object(l.h)(),t=Object(l.g)(),n=e.text,r=void 0===n?"":n,c=r.match(/^\S{1,100}$/),i=Object(a.useState)(!1),m=Object(u.a)(i,2),f=m[0],p=m[1],g=Object(a.useState)(!1),_=Object(u.a)(g,2),O=_[0],v=_[1],b=Object(a.useState)(!1),x=Object(u.a)(b,2),y=x[0],C=x[1],N=Object(a.useState)(!1),S=Object(u.a)(N,2),k=S[0],j=S[1],I=O&&k;Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(350);case 2:return e.next=4,G.findMapByText(r);case 4:if(!(n=e.sent)){e.next=14;break}return p(!0),e.next=9,A.get(n.lid);case 9:if(!(a=e.sent)){e.next=14;break}return C(!0),t.replace(h(a.id)),e.abrupt("return");case 14:v(!0),j(!0);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,t]);var B=o.a.createElement(E.q,{intent:"warning",minimal:!0,large:!0},r),D="",R="",M=null;return c?f?y||(D="warning-sign",R="\u54ce\u5440\uff0c\u9996\u9875\u7684\u65e5\u5fd7\u88ab\u5220\u9664\u4e86\uff01",M=o.a.createElement(E.a,{minimal:!0,onClick:function(){return X(r).then((function(e){return e&&t.replace(h(e))}))},intent:"primary"},"\u65b0\u5efa\u65e5\u5fd7\u5e76\u91cd\u65b0\u5173\u8054"),"m"===r&&(D="warning-sign",R="\u65e5\u5fd7\u6d88\u5931\u4e86\uff0c\u91cd\u65b0\u5173\u8054\u5427\uff01",M=o.a.createElement(E.a,{minimal:!0,onClick:function(){return X(r).then((function(e){return e&&t.replace(h(e))}))},intent:"primary"},"\u65b0\u5efa\u65e5\u5fd7\u5e76\u91cd\u65b0\u5173\u8054"))):(D="info-sign",R="\u6b64\u5173\u952e\u5b57\u5c1a\u672a\u5173\u8054\u4efb\u4f55\u65e5\u5fd7",M=o.a.createElement(E.a,{minimal:!0,onClick:function(){return q(r).then((function(e){return e&&t.replace(h(e))}))},intent:"primary"},"\u65b0\u5efa\u65e5\u5fd7\u5e76\u5173\u8054"),"m"===r&&(D="play",R="\u6b22\u8fce\u4f7f\u7528\uff0c\u5f00\u59cb\u521b\u5efa\u4f60\u7684\u7b2c\u4e00\u7bc7\u65e5\u5fd7\u5427\uff01",M=o.a.createElement(E.a,{minimal:!0,onClick:function(){return q(r).then((function(e){return e&&t.replace(h(e))}))},intent:"primary"},"\u5f00\u542f\u65e5\u5fd7"))):(D="error",R="\u683c\u5f0f\u4e0d\u6b63\u786e",M=null),o.a.createElement(w,{header:o.a.createElement(T,{showBack:"m"!==r,title:"\u6682\u672a\u5173\u8054\u65e5\u5fd7"})},o.a.createElement("div",{className:L.a.container},!I&&o.a.createElement(E.p,null),I&&o.a.createElement(E.l,{icon:D,title:B,action:M,extra:R})))}var z=n(296),V=n(108),W=n.n(V),Q=n(50),Z=n(1),$=n(30),ee=n(14),te=n.n(ee),ne=n(69),ae=n.n(ne),oe=n(109),re=n.n(oe),ce=n(42),ie=n.n(ce);function le(e){var t=e.source,n=void 0===t?"":t,a=e.className,r=e.selectAble,c=void 0!==r&&r,i=function(e){return e.replace(/(.?)#([A-Za-z0-9_\u4E00-\u9FA5]{1,100})/g,(function(e,t,n){return"\\"===t?"#"+n:"".concat(t,"[").concat(e,"](#/l/a/").concat(n,")")}))}(n),l=i.indexOf("\n---"),u=l>0?i.slice(0,l):"";return o.a.createElement("div",{className:te()(Z.a.RUNNING_TEXT,a,ie.a.markdownBody,c?ie.a.active:""),onClick:function(t){if(e.selectAble&&"function"===typeof e.onSelect&&t.shiftKey){t.preventDefault();var n=function e(t){if(!(t instanceof HTMLElement))return null;if(!(t.parentNode instanceof HTMLElement))return null;if(t.classList.contains(ie.a.markdownBody))return null;var n=t.parentElement;return n.classList.contains(ie.a.markdownBody)?t:e(n)}(t.target);if(n){var a=n.getAttribute("data-sourcePos");e.onSelect(a)}}}},o.a.createElement(re.a,{source:e.short&&u||i,sourcePos:c}))}var ue=function(e){var t=Object(l.g)();return o.a.createElement("div",{className:ae.a.container},o.a.createElement("div",{className:ae.a.meta},o.a.createElement("span",{className:te()(Z.a.TEXT_MUTED,Z.a.TEXT_SMALL)},o.a.createElement(Q.a,{datetime:e.date,locale:"zh_CN"}))),o.a.createElement(E.c,{elevation:$.a.ONE,interactive:!0,onClick:function(){return t.push(h(e.id))}},o.a.createElement(le,{source:e.children,short:!0})))};function me(){var e=Object(l.g)(),t=Object(a.useState)([]),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.all();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),o.a.createElement(w,{actions:o.a.createElement(E.m,{content:o.a.createElement(z.a,{showActionsBar:!0,shortcuts:!0,highlightCurrentDay:!0,onChange:function(t){t&&e.push(O(y()(t).format("YYYYMMDD")))}}),position:U.a.BOTTOM_RIGHT},o.a.createElement(E.a,{text:"Daily",minimal:!0,rightIcon:"caret-down"}))},o.a.createElement("div",{className:W.a.container},r.map((function(e){return o.a.createElement(ue,{key:e.id,id:e.id,date:e.time},e.content)}))))}var se=n(111),de=n.n(se),fe=n(112),pe=n.n(fe),Ee=n(70),ge=n.n(Ee),_e=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,c=void 0===r?P:r,i=e.onSubmit,l=void 0===i?P:i,m=e.placeholder,s=void 0===m?"":m,d=Object(a.useState)(null),f=Object(u.a)(d,2),p=f[0],g=f[1],_=p?p.getAttribute("data-selection"):"";return Object(a.useEffect)((function(){if(_){var e=JSON.parse(_);p.setSelectionRange(e.from,e.to),p.setAttribute("data-selection","")}}),[p,_]),o.a.createElement("div",{className:ge.a.container},o.a.createElement("div",{className:ge.a.editorBox},o.a.createElement(E.r,{fill:!0,large:!0,autoFocus:!0,value:n,growVertically:!0,placeholder:s,inputRef:function(e){return g(e)},style:{width:"100%",maxHeight:"65vh",resize:"none"},onChange:function(e){return c(e.target.value)},onKeyUp:function(e){13===e.keyCode&&!0===e.altKey&&l()},onKeyDown:function(e){if(9===e.keyCode){e.preventDefault();var t=e.target,a=t.selectionStart,o=t.selectionEnd,r=n.substring(0,a).lastIndexOf("\n")+1,i=window.getSelection().toString(),l=n.slice(r,o);e.shiftKey?(i=l.replace(/^\s{4}/,"").replace(/\n\s{4}/g,"\n"),c(n.substring(0,r)+i+n.substring(o)),p.setAttribute("data-selection",JSON.stringify({from:a-(/^\s{4}/.test(l)?"    ".length:0),to:r+i.length}))):(l="    "+l.replace(/\n/g,"\n    "),c(n.substring(0,r)+l+n.substring(o)),p.setAttribute("data-selection",JSON.stringify({from:a+"    ".length,to:r+l.length+"    "})))}}})))};function he(e){var t=e.value,n=void 0===t?"":t,a=e.onChange,r=void 0===a?P:a,c=e.placeholder,i=void 0===c?"":c,l=e.onConfirm,u=void 0===l?P:l;return o.a.createElement("div",{className:pe.a.container},o.a.createElement(_e,{value:n,placeholder:i,onChange:function(e){return r(e)},onSubmit:function(){return u()}}))}var Oe=window.localStorage.getItem("HERO_BOOK_SETTING_DATA_REMOTE_URL")||"/",ve={get:function(e){return j.post(Oe,B.a.stringify({action:"logComments.get",payload:JSON.stringify({id:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},add:function(e,t){return j.post(Oe,B.a.stringify({action:"logComments.add",payload:JSON.stringify({content:t.content,lid:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},del:function(e){return j.post(Oe,B.a.stringify({action:"logComments.del",payload:JSON.stringify({id:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},upd:function(e,t){return j.post(Oe,B.a.stringify({action:"logComments.upd",payload:JSON.stringify({id:e,content:t.content})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))},all:function(e){return j.post(Oe,B.a.stringify({action:"logComments.all",payload:JSON.stringify({lid:e})})).then((function(e){return e.data})).then((function(e){return 0===e.code?e.data:null})).catch((function(e){return null}))}},be="2"===window.localStorage.getItem("HERO_BOOK_SETTING_DATA_SOURCE")?ve:{get:function(e){return S.logComments.get(Number(e))},add:function(e,t){return S.logComments.add(Object(C.a)({},t,{lid:Number(e),time:new Date}))},del:function(e){return S.logComments.delete(Number(e))},upd:function(e,t){return S.logComments.update(Number(e),t)},all:function(e){return S.logComments.where({lid:Number(e)}).toArray()}};function xe(){var e=Object(l.h)(),t=e.id,n=void 0===t?null:t,r=e.cid,c=void 0===r?null:r,i=Object(a.useState)(!1),m=Object(u.a)(i,2),f=m[0],p=m[1],g=Object(a.useState)(!0),_=Object(u.a)(g,2),h=_[0],O=_[1],v=Object(a.useState)(""),b=Object(u.a)(v,2),x=b[0],y=b[1],C=Object(l.g)();return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return p(!0),e.abrupt("return");case 3:be.get(c).then((function(e){e&&y(e.content),O(!1)})).finally((function(){p(!0)}));case 5:case"end":return e.stop()}}),e)})))()}),[c]),o.a.createElement(w,{header:o.a.createElement(T,{showBack:!0,title:"\u8bc4\u8bba",actions:o.a.createElement(E.a,{minimal:!0,icon:"confirm",intent:"primary",onClick:function(){(h?be.add(n,{content:x}):be.upd(c,{content:x})).then((function(){C.goBack()})).catch((function(e){alert(e.message)}))}},"\u63d0\u4ea4")})},o.a.createElement("div",{className:de.a.container},f&&o.a.createElement(he,{value:x,onChange:function(e){return y(e)},placeholder:"\u8bf7\u4ece\u6b64\u51fa\u5f00\u59cb..."})))}var ye=n(113),Te=n.n(ye),we=n(114),Ce=n.n(we);function Ne(e){var t=e.value,n=void 0===t?"":t,a=e.onChange,r=void 0===a?P:a,c=e.placeholder,i=void 0===c?"":c,l=e.onConfirm,u=void 0===l?P:l;return o.a.createElement("div",{className:Ce.a.container},o.a.createElement(_e,{value:n,placeholder:i,onChange:function(e){return r(e)},onSubmit:function(){return u()}}))}function Se(){var e=Object(l.g)(),t=Object(l.h)().id,n=void 0===t?null:t,r=Object(a.useState)(!1),c=Object(u.a)(r,2),i=c[0],m=c[1],f=Object(a.useState)(!0),p=Object(u.a)(f,2),g=p[0],_=p[1],h=Object(a.useState)(""),O=Object(u.a)(h,2),v=O[0],b=O[1];return Object(a.useEffect)((function(){Object(d.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return m(!0),e.abrupt("return");case 3:A.get(n).then((function(e){e&&b(e.content),_(!1)})).finally((function(){m(!0)}));case 5:case"end":return e.stop()}}),e)})))()}),[n]),o.a.createElement(w,{header:o.a.createElement(T,{showBack:!0,actions:o.a.createElement(E.a,{minimal:!0,intent:"primary",icon:"confirm",onClick:function(){(g?A.add({content:v}):A.upd(n,{content:v})).then((function(){e.goBack()})).catch((function(e){J.show({timeout:2e3,message:e.message,intent:"error"})}))}},"\u63d0\u4ea4")})},o.a.createElement("div",{className:Te.a.container},i&&o.a.createElement(Ne,{value:v,onChange:function(e){return b(e)},placeholder:"\u8bf7\u7531\u6b64\u5f00\u59cb..."})))}var ke=n(33),je=n.n(ke),Ie=n(26),Be=n.n(Ie),De=function(e){var t=e.time,n=void 0===t?new Date:t,a=e.showTooltip,r=void 0===a||a;return o.a.createElement(E.t,{position:U.a.TOP,disabled:!r,content:y()(n).format("YYYY.MM.DD HH:mm")},o.a.createElement(Q.a,{datetime:n,locale:"zh_CN"}))};function Re(e){var t=e.comment,n=e.onRequestDelete,a=void 0===n?P:n,r=e.onRequestUpdate,c=void 0===r?P:r;return o.a.createElement("div",{className:Be.a.comment,key:t.id},o.a.createElement("div",{className:te()(Z.a.TEXT_MUTED,Be.a.commentMeta)},o.a.createElement("div",{className:Be.a.commentMetaBlock},o.a.createElement("span",{className:Be.a.commentMetaItem},o.a.createElement(De,{time:t.time}))),o.a.createElement("div",{className:te()(Be.a.commentMetaBlock,Be.a.hoverVisible)},o.a.createElement(E.m,{content:o.a.createElement(E.b,null,o.a.createElement(E.a,{minimal:!0,onClick:function(){return c(t)}},"\u7f16\u8f91"),o.a.createElement(E.d,null),o.a.createElement(E.a,{minimal:!0,intent:"danger",onClick:function(){return a(t.id)}},"\u5220\u9664")),position:U.a.TOP,interactionKind:"hover"},o.a.createElement("a",{className:te()(Be.a.commentMetaItem,Z.a.TEXT_MUTED,Z.a.TEXT_SMALL)},o.a.createElement(E.g,{icon:"more"}))))),o.a.createElement("div",{className:te()(Be.a.commentContent,Z.a.RUNNING_TEXT)},o.a.createElement(le,{source:t.content})))}function Ae(e){var t=e.list,n=void 0===t?[]:t,a=e.onRequestDelete,r=e.onRequestUpdate;return o.a.createElement("div",{className:Be.a.comments},n.map((function(e){return o.a.createElement(Re,{key:e.id,comment:e,onRequestDelete:a,onRequestUpdate:r})})))}var Me=/(\d+):(\d+)-(\d+):(\d+)/;function He(e,t){var n=e.split("\n"),a=function(e){var t=Me.exec(e);return t?{startLine:Number(t[1]),startIndex:Number(t[2]),endLine:Number(t[3]),endIndex:Number(t[4])}:null}(t);return{from:n.slice(0,a.startLine-1).map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)+(a.startLine-1)+a.startIndex,to:n.slice(0,a.endLine-1).map((function(e){return e.length})).reduce((function(e,t){return e+t}),0)+(a.endLine-1)+a.endIndex}}var Ge="10001",Ke="20001",Le="30001",Ue="40001",Je="50001",Pe="60001";function Ye(){var e=Object(l.g)(),t=Object(l.h)(),n=Object(a.useState)(!1),r=Object(u.a)(n,2),c=r[0],i=r[1],m=Object(a.useState)(!1),f=Object(u.a)(m,2),p=f[0],g=f[1],_=Object(a.useState)(null),h=Object(u.a)(_,2),O=h[0],v=h[1],b=Object(a.useState)([]),x=Object(u.a)(b,2),y=x[0],T=x[1],C=Object(a.useState)(""),N=Object(u.a)(C,2),S=N[0],k=N[1],j=Object(a.useState)(""),I=Object(u.a)(j,2),B=I[0],D=I[1],R=Object(a.useState)(null),M=Object(u.a)(R,2),H=M[0],G=M[1],K=Object(a.useState)(Ge),L=Object(u.a)(K,2),P=L[0],Y=L[1];Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get(t.id);case 2:n=e.sent,v(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.id,c]),Object(a.useEffect)((function(){function e(){return(e=Object(d.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.all(t.id);case 2:n=e.sent,T(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t.id,p]);var q=o.a.createElement(E.m,{content:o.a.createElement(E.i,null,o.a.createElement(E.j,{icon:"annotation",text:"Edit",onClick:function(){k(O.content),Y(Ke)}}),o.a.createElement(E.j,{icon:"add",text:"Append",onClick:function(){k(""),Y(Ue)}}),o.a.createElement(E.j,{icon:"comment",text:"Comment",onClick:function(){k(""),D(""),Y(Le)}}),o.a.createElement(E.i.Divider,null),o.a.createElement(E.j,{icon:"delete",intent:"danger",text:"Delete",onClick:function(){window.confirm("Please confirm DELETE item.")&&A.del(t.id).then((function(){J.show({timeout:2e3,message:"\u5220\u9664\u6210\u529f",intent:"success"}),e.goBack()})).catch((function(e){alert(e.message)}))}})),position:U.a.BOTTOM_RIGHT},o.a.createElement(E.a,{icon:"cog",text:"Operation",rightIcon:"caret-down"})),X=o.a.createElement(E.b,null,o.a.createElement(E.a,{icon:"undo",text:"Cancel",onClick:function(){Y(Ge),k("")}}),o.a.createElement(E.a,{icon:"confirm",text:"Confirm",intent:"primary",onClick:function(){A.upd(t.id,{content:S}).then((function(){Y(Ge),k(""),i(!c)}))}})),F=o.a.createElement(E.b,null,o.a.createElement(E.a,{icon:"undo",text:"Cancel",onClick:function(){Y(Ge),k("")}}),o.a.createElement(E.a,{icon:"confirm",text:"Confirm",intent:"primary",onClick:function(){be.add(t.id,{content:S}).then((function(){k(""),D(""),g(!p),Y(Ge)}))}})),z=o.a.createElement(E.b,null,o.a.createElement(E.a,{icon:"undo",text:"Cancel",onClick:function(){Y(Ge),k("")}}),o.a.createElement(E.a,{icon:"confirm",text:"Confirm",intent:"primary",onClick:function(){A.upd(t.id,{content:O.content+"\n\n"+S}).then((function(){Y(Ge),k(""),i(!c)}))}})),V=o.a.createElement(E.b,null,o.a.createElement(E.a,{icon:"undo",text:"Cancel",onClick:function(){Y(Ge),k(""),D("")}}),o.a.createElement(E.a,{icon:"confirm",text:"Confirm",intent:"primary",onClick:function(){be.upd(B,{content:S}).then((function(){Y(Ge),k(""),D(""),g(!p)}))}})),W=o.a.createElement(E.b,null,o.a.createElement(E.a,{icon:"undo",text:"Cancel",onClick:function(){Y(Ge),k(""),D("")}}),o.a.createElement(E.a,{icon:"confirm",text:"Confirm",intent:"primary",onClick:function(){var e=function(e,t,n){var a=He(e,t);return e.slice(0,a.from-1)+n+e.slice(a.to-1)}(O.content,H,S);A.upd(t.id,{content:e}).then((function(){Y(Ge),k(""),i(!c),G(null)}))}}));return o.a.createElement(w,{actions:P===Ue&&z||P===Ke&&X||P===Le&&F||P===Je&&V||P===Pe&&W||q},O&&y&&o.a.createElement("div",{className:te()(je.a.container)},o.a.createElement("div",{className:je.a.logContentBox},o.a.createElement("div",{className:je.a.logContent},o.a.createElement(le,{source:O.content,selectAble:!0,onSelect:function(e){var t=function(e,t){var n=He(e,t);return e.slice(n.from-1,n.to-1)}(O.content,e);k(t),G(e),Y(Pe)}}))),o.a.createElement("div",{className:je.a.commentBox},o.a.createElement("div",{className:je.a.commentContent},o.a.createElement(Ae,{list:y,onRequestUpdate:function(e){k(e.content),D(e.id),Y(Je)},onRequestDelete:function(e){window.confirm("Please confirm DELETE item.")&&be.del(e).then((function(){g(!p)})).catch((function(e){alert(e.message)}))}})))),P!==Ge&&o.a.createElement("div",{className:te()(je.a.editorOuter)},o.a.createElement("div",{className:je.a.editorInner},o.a.createElement(Ne,{value:S,onChange:function(e){return k(e)}}))))}var qe=n(71),Xe=n.n(qe),Fe="1",ze="2";function Ve(e){var t=window.localStorage.getItem("HERO_BOOK_SETTING_DATA_SOURCE"),n=window.localStorage.getItem("HERO_BOOK_SETTING_DATA_REMOTE_URL"),r=window.localStorage.getItem("HERO_BOOK_SETTING_DATA_REMOTE_TOKEN"),c=Object(a.useState)(t||""),i=Object(u.a)(c,2),l=i[0],m=i[1],s=Object(a.useState)(n||""),d=Object(u.a)(s,2),f=d[0],p=d[1],g=Object(a.useState)(r||""),_=Object(u.a)(g,2),h=_[0],O=_[1];return o.a.createElement(w,null,o.a.createElement("div",{className:Xe.a.container},o.a.createElement(E.o,{label:"\u6301\u4e45\u5316\u65b9\u6848\uff1a",selectedValue:l,onChange:function(e){var t=e.target.value;window.localStorage.setItem("HERO_BOOK_SETTING_DATA_SOURCE",t),m(t)}},o.a.createElement(E.n,{label:"\u672c\u5730\u6570\u636e\u5e93",value:Fe}),o.a.createElement(E.n,{label:"\u8fdc\u7a0b\u6570\u636e\u5e93",value:ze})),l===ze&&o.a.createElement(E.c,{className:Xe.a.indent},o.a.createElement(E.e,{inline:!0,label:"\u63a5\u53e3\u5730\u5740"},o.a.createElement(E.h,{placeholder:"\u8bf7\u8f93\u5165\u63a5\u53e3\u5730\u5740",value:f,onChange:function(e){var t=e.target.value;window.localStorage.setItem("HERO_BOOK_SETTING_DATA_REMOTE_URL",t),p(t)}})),o.a.createElement(E.e,{inline:!0,label:"\u6821\u9a8c\u4fe1\u606f"},o.a.createElement(E.h,{placeholder:"\u8bf7\u8f93\u5165\u6821\u9a8c\u4fe1\u606f",value:h,onChange:function(e){var t=e.target.value;window.localStorage.setItem("HERO_BOOK_SETTING_DATA_REMOTE_TOKEN",t),O(t)}})))))}n(287),n(288),n(289),n(290);var We=function(){return o.a.createElement(i.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/l/l",component:me}),o.a.createElement(l.b,{path:"/l/s",component:Ve}),o.a.createElement(l.b,{path:"/l/d/:id",component:Ye}),o.a.createElement(l.b,{path:"/l/a/:text",component:F}),o.a.createElement(l.b,{path:"/l/ce/:id?",component:Se}),o.a.createElement(l.b,{path:"/l/lc/ce/:id/:cid?",component:xe}),o.a.createElement(l.a,{to:"/l/a/m"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},33:function(e,t,n){e.exports={container:"logDetail_container__w0WFV",logContentBox:"logDetail_logContentBox__2FBOS",logContent:"logDetail_logContent__2q741",commentBox:"logDetail_commentBox__2xmER",commentContent:"logDetail_commentContent__2yOe-",footerActions:"logDetail_footerActions__ax9Jf",hide:"logDetail_hide__3XdPe",editorOuter:"logDetail_editorOuter__1Gkc2",editorInner:"logDetail_editorInner__37efe"}},42:function(e,t,n){e.exports={markdownBody:"markdownPreview_markdownBody__3D-P7"}},65:function(e,t,n){e.exports={container:"appFrame_container__28Uto",body:"appFrame_body__1wP9K"}},69:function(e,t,n){e.exports={container:"logItem_container__1HQ_G",metaBlock:"logItem_metaBlock__19X2m",meta:"logItem_meta__JAOjF",metaItem:"logItem_metaItem__37psE",markdownBody:"logItem_markdownBody__1O-pH"}},70:function(e,t,n){e.exports={container:"markdownEditor_container__1Bh7Q",editorBox:"markdownEditor_editorBox__2jfkZ"}},71:function(e,t,n){e.exports={container:"setting_container__32Nic",indent:"setting_indent__24ct8"}}},[[148,1,2]]]);
//# sourceMappingURL=main.77686ec2.chunk.js.map