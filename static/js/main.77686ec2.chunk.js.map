{"version":3,"sources":["component/normalNavigator/index.module.css","page/alia.module.css","page/log.module.css","page/logCommentCreate.module.css","component/logCommentEditor/index.module.css","page/logCreate.module.css","component/logEditor/index.module.css","component/logComments/index.module.css","util/getUrlUtil.js","component/normalNavigator/index.js","component/appFrame/index.js","store/index.js","util/request.js","service/log.remote.js","service/log.js","service/textToIdMap.remote.js","service/textToIdMap.js","util/toaster.js","util/commonUtil.js","page/alia.js","component/markdownPreview/index.js","component/logItem/index.js","page/log.js","component/markdownEditor/index.js","component/logCommentEditor/index.js","service/logComment.remote.js","service/logComment.js","page/logCommentCreate.js","component/logEditor/index.js","page/logCreate.js","component/timeAgo/index.js","component/logComments/index.js","util/sourcePosUtil.js","page/logDetail.js","page/setting.js","App.js","serviceWorker.js","index.js","page/logDetail.module.css","component/markdownPreview/index.module.css","component/appFrame/index.module.css","component/logItem/index.module.css","component/markdownEditor/index.module.css","page/setting.module.css"],"names":["module","exports","id","text","NormalNavigator","props","actions","h","useHistory","fixedToTop","style","userSelect","className","styles","container","Group","align","Heading","icon","minimal","onClick","push","getUrlUtil","dayjs","Date","now","format","body","children","db","Dexie","version","stores","logs","logComments","textToIdMap","instance","axios","create","timeout","headers","window","localStorage","getItem","url","get","request","post","qs","stringify","action","payload","JSON","then","response","data","res","code","catch","err","add","logInfo","content","del","upd","all","curr","impl","store","Number","time","delete","update","orderBy","toArray","l","reverse","findMapByText","link","lid","relink","where","first","match","item","AppToaster","Toaster","position","Position","TOP","noop","delay","ms","Promise","resolve","setTimeout","createAndLink","a","success","t","logService","textToIdMapService","show","message","intent","createAndUpdateLink","Alia","params","useParams","isValidText","useState","isTextExist","setIsTextExist","isTextExistInit","setIsTextExistInit","isLogExist","setIsLogExist","isLogExistInit","setIsLogExistInit","isInit","useEffect","map","log","replace","validate","title","large","description","header","showBack","extra","MarkdownPreview","source","rsource","selectAble","m","p1","p2","generatLinks","sepIdx","indexOf","slice","names","Classes","RUNNING_TEXT","markdownBody","active","evt","onSelect","shiftKey","preventDefault","el","findTopLevelEle","target","HTMLElement","parentNode","classList","contains","pnode","parentElement","sourcePosStr","getAttribute","short","sourcePos","meta","TEXT_MUTED","TEXT_SMALL","datetime","date","locale","elevation","Elevation","ONE","interactive","Log","setlogs","list","fetch","showActionsBar","shortcuts","highlightCurrentDay","onChange","BOTTOM_RIGHT","rightIcon","key","value","onSubmit","placeholder","inputRef","setInputRef","rSelection","selection","parse","setSelectionRange","from","to","setAttribute","editorBox","fill","autoFocus","growVertically","ref","width","maxHeight","resize","onKeyUp","keyCode","altKey","onKeyDown","start","selectionStart","end","selectionEnd","linesBegin","substring","lastIndexOf","selected","getSelection","toString","expandSelected","test","length","LogCommentEditor","onConfirm","val","logCommentInfo","LogCommentCreate","cid","initState","setInitState","isNew","setIsNew","setValue","logCommentService","finally","goBack","alert","LogEditor","LogCreate","showTooltip","disabled","LogComment","c","comment","onRequestDelete","onRequestUpdate","commentMeta","commentMetaBlock","commentMetaItem","hoverVisible","interactionKind","commentContent","LogComments","comments","REG","getRange","sourceArr","split","exec","startLine","startIndex","endLine","endIndex","sourcePosParse","reduce","p","n","MODE","LogDetail","logFlag","setLogFlag","commentsFlag","setCommentsFlag","logData","setLogData","logCommentsData","setLogCommentsData","editSource","setEditSource","commentRefId","setCommentRefId","posData","setPosData","mode","setMode","fetchData","logCommentsInfo","viewAction","Divider","confirm","editAction","commentAction","appendAction","commentEditAction","partialEditAction","replacement","range","replaceCodeFromSource","logContentBox","logContent","pos","partial","sliceCodeFromSource","commentBox","editorOuter","editorInner","DATA_SOURCE_TYPES","SettingPage","ru","rt","remoteUrl","setRemoteUrl","remoteToken","setRemoteToken","label","selectedValue","v","setItem","indent","inline","App","path","component","LogPage","LogSetting","LogDetailPage","AliaPage","LogCreatePage","LogCommentCreatePage","Boolean","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.77686ec2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"normalNavigator_container__155OS\",\"content\":\"normalNavigator_content__3QptO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"alia_container__3sOFO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"log_container__1snyH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logCommentCreate_container__3qGs1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"logCommentEditor_textarea__ltzcQ\",\"container\":\"logCommentEditor_container__3s0iH\",\"buttonWrap\":\"logCommentEditor_buttonWrap__o5tot\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logCreate_container__19vSt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"logEditor_textarea__28vya\",\"container\":\"logEditor_container__1GeHV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comments\":\"logComments_comments__1LjH6\",\"comment\":\"logComments_comment__GP3sS\",\"commentTime\":\"logComments_commentTime__3ccqY\",\"commentMeta\":\"logComments_commentMeta__2p6gN\",\"commentMetaItem\":\"logComments_commentMetaItem__2-ZM7\"};","\nexport default {\n    getHome: () => '/l',\n    getLogUrl: () => '/l/l',\n    getLogDetailUrl: (id) => `/l/d/${id}`,\n    getAliaUrl: text => `/l/a/${text}`,\n    getLogCreateUrl: (id = '') => `/l/ce/${id}`,\n    getLogCommentCreateUrl: (id, cid = '') => `/l/lc/ce/${id}/${cid}`\n}\n","\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n    Navbar, Button\n} from '@blueprintjs/core';\nimport getUrlUtil from 'util/getUrlUtil';\nimport styles from './index.module.css';\nimport dayjs from 'dayjs';\n\nexport default function NormalNavigator(props) {\n    const { actions = null } = props;\n    const h = useHistory();\n    return (\n        <Navbar fixedToTop style={{ userSelect: 'none'}}>\n            <div className={styles.container}>\n                <Navbar.Group align=\"left\">\n                    <Navbar.Heading>\n                        <h3 >&lt;HeroBook /&gt;</h3>\n                    </Navbar.Heading>\n                    <Button icon=\"home\" minimal text=\"Home\" onClick={() => {\n                        h.push(getUrlUtil.getHome());\n                    }} />\n                    <Button icon=\"book\" minimal text=\"List\" onClick={() => {\n                        h.push(getUrlUtil.getLogUrl());\n                    }} />\n                    <Button text=\"Today\" minimal icon=\"pin\" onClick={() => {\n                        h.push( getUrlUtil.getAliaUrl(dayjs(Date.now()).format('YYYYMMDD')));\n                    }} />\n                </Navbar.Group>\n                { \n                    actions && <Navbar.Group align=\"right\">\n                        { actions }\n                    </Navbar.Group>\n                }\n            </div>\n        </Navbar>\n    );\n}","import React from 'react';\nimport styles from './index.module.css';\nimport NormalNavigator from '../normalNavigator';\n\nexport default function(props) {\n    return (\n        <div className={styles.container}>\n            <NormalNavigator actions={props.actions} />\n            <div className={styles.body}>{props.children}</div>\n        </div>\n    );\n}","import Dexie from 'dexie';\n\nconst db = new Dexie('EfficientDatabase');\n\ndb.version(1).stores({\n    logs: '++id, content, time'\n});\n\ndb.version(2).stores({\n    logComments: '++id, content, time, lid'\n});\n\ndb.version(3).stores({\n    textToIdMap: '++id, &text, lid'\n});\n\nexport default db;\n\n// import SyncClient from 'sync-client';\n// // SyncClient is a subclass of Dexie\n\n// const databaseName = 'testDB'; // The name for the indexedDB database\n// const versions = [\n//     {\n//         version: 1,\n//         stores: {\n//           logs: '++id, content, time'\n//         }\n//     }, {\n//         version: 2,\n//         stores: {\n//             logComments: '++id, content, time, lid'\n//         }\n//     }, {\n//         version: 3,\n//         stores: {\n//             textToIdMap: '++id, &text, lid'\n//         }\n//     }\n// ];\n\n// const syncClient = new SyncClient(databaseName, versions, {\n\n// });\n\n// export default syncClient;\n// window.syncClient = syncClient;\n\n// syncClient.syncable.connect('sync_client_protocol', 'http://127.0.0.1:3000');\n// syncClient.syncable.on('statusChanged', function (newStatus, url) {\n//     console.log (\"Sync Status changed: \" + newStatus, url);\n// });","import axios from \"axios\";\n\nconst instance = axios.create({\n  timeout: 3000,\n  headers: {\n    \"Content-Type\": \"application/x-www-form-urlencoded\",\n    \"token\": window.localStorage.getItem('HERO_BOOK_SETTING_DATA_REMOTE_TOKEN') || ''\n  }\n});\n\nexport default instance;","import request from '../util/request';\nimport qs from \"querystring\";\n\nconst url = window.localStorage.getItem('HERO_BOOK_SETTING_DATA_REMOTE_URL') || '/';\n\nconst get = (id) => request.post(url, qs.stringify({\n    action: 'logs.get',\n    payload: JSON.stringify({ id })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst add = (logInfo) => request.post(url, qs.stringify({\n    action: 'logs.add',\n    payload: JSON.stringify({ content: logInfo.content })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst del = (id) => request.post(url, qs.stringify({\n    action: 'logs.del',\n    payload: JSON.stringify({ id })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst upd = (id, logInfo) => request.post(url, qs.stringify({\n    action: 'logs.upd',\n    payload: JSON.stringify({ id, content: logInfo.content })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst all = () => request.post(url, qs.stringify({\n    action: 'logs.all',\n    payload: JSON.stringify({ })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nexport default {\n    get, add, del, upd, all\n};","import store from 'store/index';\nimport impl from './log.remote';\n\nconst curr = window.localStorage.getItem('HERO_BOOK_SETTING_DATA_SOURCE');\n\nconst get = (id) => store.logs.get(Number(id));\n\nconst add = (logInfo) => store.logs.add({...logInfo, time: new Date()});\n\nconst del = (id) => store.logs.delete(Number(id));\n\nconst upd = (id, logInfo) => store.logs.update(Number(id), logInfo);\n\nconst all = () => store.logs.orderBy('time').toArray().then(l => l.reverse());\n\nexport default curr === '2' ? impl : {\n    get, add, del, upd, all\n}","import request from '../util/request';\nimport qs from \"querystring\";\n\nconst url = window.localStorage.getItem('HERO_BOOK_SETTING_DATA_REMOTE_URL') || '/';\n\nconst findMapByText = text => request.post(url, qs.stringify({\n    action: 'textToIdMap.findMapByText',\n    payload: JSON.stringify({ text })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst link = (text, lid) => request.post(url, qs.stringify({\n    action: 'textToIdMap.link',\n    payload: JSON.stringify({ text, lid })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst relink = (text, lid) => request.post(url, qs.stringify({\n    action: 'textToIdMap.relink',\n    payload: JSON.stringify({ text, lid })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\n  export default {\n    findMapByText,\n    link,\n    relink\n};","import store from 'store/index';\nimport impl from './textToIdMap.remote';\n\nconst curr = window.localStorage.getItem('HERO_BOOK_SETTING_DATA_SOURCE');\n\nconst findMapByText = text => store\n    .textToIdMap\n    .where({text})\n    .first(match => match)\n    .catch(() => null);\n\nconst link = (text, lid) => store.textToIdMap.add({ text, lid });\nconst relink = (text, lid) => store.textToIdMap.where({ text }).first(item => store.textToIdMap.update(item.id, { lid }));\n\nexport default  curr === '2' ? impl : {\n    findMapByText,\n    link,\n    relink\n};","import { Position, Toaster } from \"@blueprintjs/core\";\n \n\nexport const AppToaster = Toaster.create({\n    className: \"recipe-toaster\",\n    position: Position.TOP\n});","\nexport const noop = () => false;\n\nexport const delay = ms => new Promise(resolve => {\n    setTimeout(resolve, ms);\n});","\nimport React, { useEffect, useState } from 'react';\nimport { useParams, useHistory } from 'react-router-dom';\nimport AppFrame from 'component/appFrame';\nimport NormalNavigator from 'component/normalNavigator';\nimport logService from 'service/log';\nimport textToIdMapService from 'service/textToIdMap';\nimport styles from './alia.module.css';\nimport { Button, NonIdealState, Tag, Spinner } from '@blueprintjs/core';\nimport { AppToaster } from 'util/toaster';\nimport getUrlUtil from 'util/getUrlUtil';\nimport { delay } from 'util/commonUtil';\n\nconst createAndLink = async (text) => {\n    let success = true;\n    let lid;\n    let t = '';\n    if (text === 'm') { t = '美好的一天！' }\n    try {\n        lid = await logService.add({ content: t || text + '\\n---\\n' });\n        await textToIdMapService.link(text, lid);\n    } catch(err) {\n        AppToaster.show({ timeout: 2000, message: err.message, intent: 'danger' });\n        success = false;\n    }\n    return success ? lid : null;\n}\nconst createAndUpdateLink = async (text) => {\n    let success = true;\n    let lid;\n    let t = '';\n    if (text === 'm') { t = '美好的一天！' }\n    try {\n        lid = await logService.add({ content: t || text + '\\n---\\n' });\n        await textToIdMapService.relink(text, lid);\n    } catch(err) {\n        AppToaster.show({ timeout: 2000, message: err.message, intent: 'danger' });\n        success = false;\n    }\n    return success ? lid : null;\n}\n\nexport default function Alia() {\n    const TEXT_REG = /^\\S{1,100}$/;\n    const params = useParams();\n    const h = useHistory();\n    const { text = '' } = params;\n    const isValidText = text.match(TEXT_REG);\n    const [ isTextExist, setIsTextExist ] = useState(false);\n    const [ isTextExistInit, setIsTextExistInit ] = useState(false);\n    const [ isLogExist, setIsLogExist ] = useState(false);\n    const [ isLogExistInit, setIsLogExistInit ] = useState(false);\n    const isInit = isTextExistInit && isLogExistInit;\n\n    useEffect(() => {\n        async function validate() {\n            await delay(350);\n            const map = await textToIdMapService.findMapByText(text);\n            if (map) {\n                setIsTextExist(true);\n                const log = await logService.get(map.lid);\n                if (log) {\n                    setIsLogExist(true);\n                    h.replace(getUrlUtil.getLogDetailUrl(log.id));\n                    return;\n                }\n            }\n            setIsTextExistInit(true);\n            setIsLogExistInit(true);\n        }\n        validate();\n    }, [ text, h ]);\n\n    const title = <Tag intent=\"warning\" minimal large >{text}</Tag>;\n    let icon = '';\n    let description = '';\n    let action = null;\n\n    if (!isValidText) {\n        icon=\"error\";\n        description = \"格式不正确\";\n        action = null;\n    } else {\n        if (!isTextExist) {\n            icon = \"info-sign\";\n            description = \"此关键字尚未关联任何日志\";\n            action = <Button minimal onClick={() => createAndLink(text).then(lid => lid && h.replace(getUrlUtil.getLogDetailUrl(lid)))} intent=\"primary\">新建日志并关联</Button>;\n\n            if (text === 'm') {\n                icon = \"play\";\n                description = \"欢迎使用，开始创建你的第一篇日志吧！\";\n                action = <Button minimal onClick={() => createAndLink(text).then(lid => lid && h.replace(getUrlUtil.getLogDetailUrl(lid)))} intent=\"primary\">开启日志</Button>;\n            }\n        } else {\n            if (!isLogExist) {\n                icon = \"warning-sign\";\n                description = \"哎呀，首页的日志被删除了！\";\n                action = <Button minimal onClick={() => createAndUpdateLink(text).then(lid => lid && h.replace(getUrlUtil.getLogDetailUrl(lid)))} intent=\"primary\">新建日志并重新关联</Button>;\n\n                if (text === 'm') {\n                    icon = \"warning-sign\";\n                    description = \"日志消失了，重新关联吧！\";\n                    action = <Button minimal onClick={() => createAndUpdateLink(text).then(lid => lid && h.replace(getUrlUtil.getLogDetailUrl(lid)))} intent=\"primary\">新建日志并重新关联</Button>;\n                }\n            }\n        }\n    }\n\n    return (\n        <AppFrame header={\n            <NormalNavigator\n                showBack={text !== 'm'}\n                title=\"暂未关联日志\"\n            />\n        }>\n            <div className={styles.container}>\n                {\n                    !isInit && <Spinner />\n                }\n                {\n                    isInit && <NonIdealState\n                        icon={icon}\n                        title={title}\n                        action={action}\n                        extra={description}\n                    >\n                    </NonIdealState>\n                }\n            </div>\n        </AppFrame>\n    );\n}\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport names from 'classnames';\nimport styles from './index.module.css';\nimport { Classes } from '@blueprintjs/core';\n\nconst SEGMENT = '\\n---';\n\nfunction findTopLevelEle(target) {\n    if (!(target instanceof HTMLElement)) return null;\n    if (!(target.parentNode instanceof HTMLElement)) return null;\n    if (target.classList.contains(styles.markdownBody)) return null;\n    const pnode = target.parentElement;\n    if (pnode.classList.contains(styles.markdownBody)) {\n        return target;\n    }\n    return findTopLevelEle(pnode);\n}\nfunction generatLinks(source) {\n    return source.replace(/(.?)#([A-Za-z0-9_\\u4E00-\\u9FA5]{1,100})/g, (m, p1, p2) => {\n        if (p1 === '\\\\') {\n            return '#' + p2;\n        }\n        return `${p1}[${m}](#/l/a/${p2})`;\n    });\n}\n\nexport default function MarkdownPreview(props) {\n    const { source: rsource = '', className, selectAble = false } = props;\n    const source = generatLinks(rsource);\n    const sepIdx = source.indexOf(SEGMENT);\n    const title = sepIdx > 0 ? source.slice(0, sepIdx) : '';\n    return (\n        <div\n            className={names(\n                Classes.RUNNING_TEXT,\n                className,\n                styles.markdownBody,\n                selectAble ? styles.active : ''\n            )}\n            onClick={evt => {\n                if (!props.selectAble || typeof props.onSelect !== 'function') return;\n                if (!evt.shiftKey) return;\n                evt.preventDefault();\n                const el = findTopLevelEle(evt.target);\n                if (!el) return;\n                const sourcePosStr = el.getAttribute('data-sourcePos');\n                props.onSelect(sourcePosStr);\n            }}\n        >\n            <ReactMarkdown\n                source={props.short ? (title || source) : source}\n                sourcePos={selectAble}\n            />\n        </div>\n    );\n}","/* eslint-disable jsx-a11y/anchor-is-valid  */\n\nimport React from 'react';\nimport TimeAgo from 'timeago-react';\nimport { useHistory } from 'react-router-dom';\nimport { Card, Classes, Elevation } from '@blueprintjs/core';\nimport names from 'classnames';\nimport styles from './index.module.css';\nimport MarkdownPreview from 'component/markdownPreview';\nimport getUrlUtil from 'util/getUrlUtil';\n\nexport default function (props) {\n    const h = useHistory();\n    return (\n        <div className={styles.container}>\n            <div className={styles.meta}>\n                <span className={names(Classes.TEXT_MUTED, Classes.TEXT_SMALL)}>\n                    <TimeAgo datetime={props.date} locale='zh_CN' />\n                </span>\n            </div>\n            <Card elevation={Elevation.ONE} interactive onClick={() => h.push(getUrlUtil.getLogDetailUrl(props.id))}>\n                <MarkdownPreview source={props.children} short />\n            </Card>\n        </div>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Button, Popover, Position } from '@blueprintjs/core';\nimport { DatePicker } from '@blueprintjs/datetime';\nimport styles from './log.module.css';\nimport LogItem from 'component/logItem';\nimport AppFrame from 'component/appFrame';\nimport logService from 'service/log';\nimport getUrlUtil from 'util/getUrlUtil';\nimport dayjs from 'dayjs';\n\nexport default function Log() {\n    const h = useHistory();\n    const [logs, setlogs] = useState([]);\n    useEffect(() => {\n        async function fetch() {\n            const list = await logService.all();\n            setlogs(list);\n        }\n        fetch();\n    }, []);\n    return (\n        <AppFrame actions={\n            <Popover content={\n                <DatePicker\n                    showActionsBar\n                    shortcuts\n                    highlightCurrentDay\n                    onChange={evt => {\n                        evt && h.push( getUrlUtil.getAliaUrl(dayjs(evt).format('YYYYMMDD')));\n                    }}\n                />\n            } position={Position.BOTTOM_RIGHT}>\n                <Button text=\"Daily\" minimal rightIcon=\"caret-down\" />\n            </Popover>\n        }>\n            <div className={styles.container}>\n                {\n                    logs.map(message => (\n                        <LogItem\n                            key={message.id}\n                            id={message.id}\n                            date={message.time}\n                        >{message.content}</LogItem>\n                    ))\n                }\n            </div>\n        </AppFrame>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport styles from './index.module.css';\nimport { TextArea } from '@blueprintjs/core';\nimport { noop } from 'util/commonUtil';\n\nexport default function(props) {\n    const {\n        value = '',\n        onChange = noop,\n        onSubmit = noop,\n        placeholder = ''\n    } = props;\n    const [inputRef, setInputRef] = useState(null);\n    const rSelection = inputRef ? inputRef.getAttribute('data-selection') : '';\n    useEffect(() => {\n        if (rSelection) {\n            const selection = JSON.parse(rSelection);\n            inputRef.setSelectionRange(selection.from, selection.to);\n            inputRef.setAttribute('data-selection', '');\n        }\n    }, [ inputRef, rSelection ]);\n    return (\n        <div className={styles.container}>\n            <div className={styles.editorBox}>\n                <TextArea\n                    fill large\n                    autoFocus\n                    value={value}\n                    growVertically\n                    placeholder={placeholder}\n                    inputRef={ref => setInputRef(ref)}\n                    style={{width: '100%', maxHeight: '65vh', resize: 'none'}}\n                    onChange={evt => onChange(evt.target.value)}\n                    onKeyUp={evt => {\n                        if (evt.keyCode === 13 && evt.altKey === true) {\n                            onSubmit();\n                        }\n                    }}\n                    onKeyDown={evt => {\n                        if (evt.keyCode === 9) {\n                            evt.preventDefault();\n                            const el = evt.target;\n                            const indent = '    ';\n                            const start = el.selectionStart;\n                            const end = el.selectionEnd;\n                            const head = value.substring(0, start);\n                            const linesBegin = head.lastIndexOf('\\n') + 1;\n                            let selected = window.getSelection().toString();\n                            let expandSelected = value.slice(linesBegin, end);\n                            if (evt.shiftKey) {\n                                selected = expandSelected.replace(/^\\s{4}/, '').replace(/\\n\\s{4}/g, '\\n');\n                                onChange(value.substring(0, linesBegin) + selected + value.substring(end));\n                                inputRef.setAttribute('data-selection', JSON.stringify({\n                                    from: start - (/^\\s{4}/.test(expandSelected) ? indent.length : 0),\n                                    to: linesBegin + selected.length\n                                }));\n                            } else {\n                                expandSelected = indent + expandSelected.replace(/\\n/g, '\\n' + indent);\n                                onChange(value.substring(0, linesBegin) + expandSelected + value.substring(end));\n                                inputRef.setAttribute('data-selection', JSON.stringify({\n                                    from: start + indent.length,\n                                    to: linesBegin + expandSelected.length + indent\n                                }));\n                            }\n                        }\n                    }}\n                />\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport styles from './index.module.css';\nimport { noop } from 'util/commonUtil';\nimport MarkdownEditor from 'component/markdownEditor';\n\nexport default function LogCommentEditor (props) {\n    const { value = '', onChange = noop, placeholder = '', onConfirm = noop } = props;\n\n    return (\n        <div className={styles.container}>\n            <MarkdownEditor\n                value={value}\n                placeholder={placeholder}\n                onChange={val => onChange(val)}\n                onSubmit={() => onConfirm()}\n            />\n        </div>\n    );\n}","import request from '../util/request';\nimport qs from \"querystring\";\n\nconst url = window.localStorage.getItem('HERO_BOOK_SETTING_DATA_REMOTE_URL') || '/';\n\nconst get = (id) => request.post(url, qs.stringify({\n    action: 'logComments.get',\n    payload: JSON.stringify({ id })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst add = (id, logCommentInfo) => request.post(url, qs.stringify({\n    action: 'logComments.add',\n    payload: JSON.stringify({ content: logCommentInfo.content, lid: id })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst del = (id) => request.post(url, qs.stringify({\n    action: 'logComments.del',\n    payload: JSON.stringify({ id })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst upd = (id, logCommentInfo) => request.post(url, qs.stringify({\n    action: 'logComments.upd',\n    payload: JSON.stringify({ id, content: logCommentInfo.content })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nconst all = (lid) => request.post(url, qs.stringify({\n    action: 'logComments.all',\n    payload: JSON.stringify({ lid })\n  })).then(response => response.data).then(res => {\n    if (res.code === 0) return res.data;\n    return null;\n  }).catch(err => null);\n\nexport default {\n    get, add, del, upd, all\n};","import store from 'store/index';\nimport impl from './logComment.remote';\n\nconst curr = window.localStorage.getItem('HERO_BOOK_SETTING_DATA_SOURCE');\n\nconst get = (id) => store.logComments.get(Number(id));\n\nconst add = (id, logCommentInfo) => store.logComments.add({...logCommentInfo, lid: Number(id), time: new Date()});\n\nconst del = (id) => store.logComments.delete(Number(id));\n\nconst upd = (id, logCommentInfo) => store.logComments.update(Number(id), logCommentInfo);\n\nconst all = (id) => store.logComments.where({ lid: Number(id) }).toArray();\n\nexport default curr === '2' ? impl : {\n    get, add, del, upd, all\n}","import React, { useState, useEffect} from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { Button } from '@blueprintjs/core';\nimport styles from './logCommentCreate.module.css';\nimport LogCommentEditor from 'component/logCommentEditor';\nimport AppFrame from 'component/appFrame';\nimport NormalNavigation from 'component/normalNavigator';\nimport logCommentService from 'service/logComment';\n\nexport default function LogCommentCreate() {\n    const params = useParams();\n    const { id = null, cid = null } = params;\n    const [ initState, setInitState ] = useState(false);\n    const [ isNew, setIsNew ] = useState(true);\n    const [ value, setValue ] = useState('');\n    const h = useHistory();\n\n    useEffect(() => {\n        (async function() {\n            if (!cid) {\n                setInitState(true);\n                return;\n            };\n            logCommentService.get(cid)\n                .then(m => {\n                    m && setValue(m.content);\n                    setIsNew(false);\n                })\n                .finally(() => {\n                    setInitState(true);\n                });\n        })();\n    }, [ cid ]);\n    return (\n        <AppFrame header={\n            <NormalNavigation showBack title=\"评论\" actions={\n                <Button minimal icon=\"confirm\" intent=\"primary\" onClick={() => {\n                    let process;\n                    if (isNew) {\n                        process = logCommentService.add(id, {\n                            content: value\n                        });\n                    } else {\n                        process = logCommentService.upd(cid, {\n                            content: value\n                        });\n                    }\n                    process.then(() => {\n                        h.goBack();\n                    }).catch(err => {\n                        alert(err.message);\n                    });\n                }}>提交</Button>\n            } />\n        }>\n            <div className={styles.container}>\n                {\n                    initState && <LogCommentEditor\n                        value={value}\n                        onChange={val => setValue(val)}\n                        placeholder=\"请从此出开始...\"\n                    />\n                }\n            </div>\n        </AppFrame>\n    );\n}\n","import React from 'react';\nimport styles from './index.module.css';\nimport { noop } from 'util/commonUtil';\nimport MarkdownEditor from 'component/markdownEditor';\n\nexport default function LogEditor(props) {\n    const { value = '', onChange = noop, placeholder = '', onConfirm = noop } = props;\n    return (\n        <div className={styles.container}>\n            <MarkdownEditor\n                value={value}\n                placeholder={placeholder}\n                onChange={val => onChange(val)}\n                onSubmit={() => onConfirm()}\n            />\n        </div>\n    );\n}","import React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { Button } from '@blueprintjs/core';\nimport styles from './logCreate.module.css';\nimport LogEditor from 'component/logEditor';\nimport AppFrame from 'component/appFrame';\nimport NormalNavigator from 'component/normalNavigator';\nimport logService from 'service/log';\nimport { AppToaster } from 'util/toaster';\n\nexport default function LogCreate() {\n    const h = useHistory();\n    const params = useParams();\n    const { id = null } = params;\n    const [ initState, setInitState ] = useState(false);\n    const [ isNew, setIsNew ] = useState(true);\n    const [ value, setValue ] = useState('');\n\n    useEffect(() => {\n        (async function() {\n            if (!id) {\n                setInitState(true);\n                return;\n            };\n            logService.get(id)\n                .then(m => {\n                    m && setValue(m.content);\n                    setIsNew(false);\n                })\n                .finally(() => {\n                    setInitState(true);\n                });\n        })();\n    }, [ id ]);\n    return (\n        <AppFrame header={\n            <NormalNavigator showBack actions={\n                <Button minimal intent=\"primary\" icon=\"confirm\" onClick={() => {\n                    let process;\n                    if (isNew) {\n                        process = logService.add({\n                            content: value\n                        });\n                    } else {\n                        process = logService.upd(id, {\n                            content: value\n                        });\n                    }\n                    process.then(() => {\n                        h.goBack();\n                    }).catch(err => {\n                        AppToaster.show({ timeout: 2000, message: err.message, intent: 'error' });\n                    });\n                }}>提交</Button>\n            } />\n        }>\n            <div className={styles.container}>\n                {\n                    initState && <LogEditor\n                        value={value}\n                        onChange={val => setValue(val)}\n                        placeholder=\"请由此开始...\"\n                    />\n                }\n            </div>\n        </AppFrame>\n    );\n}\n","import React from 'react';\nimport { Tooltip, Position } from '@blueprintjs/core';\nimport TimeAgo from 'timeago-react';\nimport dayjs from 'dayjs';\n\nexport default function(props) {\n    const { time = new Date(), showTooltip = true } = props;\n    return (\n        <Tooltip position={Position.TOP} disabled={!showTooltip} content={dayjs(time).format('YYYY.MM.DD HH:mm')} >\n            <TimeAgo datetime={time} locale='zh_CN' />\n        </Tooltip>\n    );\n}","/* eslint-disable jsx-a11y/anchor-is-valid  */\n\nimport React from 'react';\nimport styles from './index.module.css';\nimport names from 'classnames';\nimport { Classes, Icon, ButtonGroup, Button, Popover, Position, Divider } from '@blueprintjs/core';\nimport MarkdownPreview from 'component/markdownPreview';\nimport Ago from 'component/timeAgo';\nimport { noop } from 'util/commonUtil';\n\nfunction LogComment(props) {\n    const { comment: c, onRequestDelete = noop, onRequestUpdate = noop } = props;\n\n    return (\n        <div className={styles.comment} key={c.id}>\n            <div className={names(Classes.TEXT_MUTED, styles.commentMeta)}>\n                <div className={styles.commentMetaBlock}>\n                    <span className={styles.commentMetaItem}><Ago time={c.time} /></span>\n                </div>\n                <div className={names(styles.commentMetaBlock, styles.hoverVisible)}>\n                    <Popover content={\n                        <ButtonGroup>\n                            <Button minimal onClick={() => onRequestUpdate(c)}>编辑</Button>\n                            <Divider />\n                            <Button minimal intent=\"danger\" onClick={() => onRequestDelete(c.id)}>删除</Button>\n                        </ButtonGroup>\n                    } position={Position.TOP} interactionKind=\"hover\">\n                        <a\n                            className={names(\n                                styles.commentMetaItem,\n                                Classes.TEXT_MUTED,\n                                Classes.TEXT_SMALL\n                            )}\n                        >\n                            <Icon icon=\"more\" />\n                        </a>\n                    </Popover>\n                </div>\n            </div>\n            <div className={names(styles.commentContent, Classes.RUNNING_TEXT)}>\n                <MarkdownPreview source={c.content} />\n            </div>\n        </div>\n    );\n}\n\nexport default function LogComments(props) {\n    const { list = [], onRequestDelete, onRequestUpdate} = props;\n    return (\n        <div className={styles.comments}>\n            {\n                list.map(c => (\n                    <LogComment\n                        key={c.id}\n                        comment={c}\n                        onRequestDelete={onRequestDelete}\n                        onRequestUpdate={onRequestUpdate}\n                    />\n                ))\n            }\n        </div>\n    );\n}","\nconst REG = /(\\d+):(\\d+)-(\\d+):(\\d+)/;\n\nexport function sourcePosParse(sourcePosStr) {\n    const match = REG.exec(sourcePosStr);\n    if (!match) return null;\n    return {\n        startLine: Number(match[1]),\n        startIndex: Number(match[2]),\n        endLine: Number(match[3]),\n        endIndex: Number(match[4]),\n    }\n}\n\nexport function getRange(source, sourcePosStr) {\n    const sourceArr = source.split('\\n');\n    const sourcePos = sourcePosParse(sourcePosStr);\n    const range = {\n        from: sourceArr\n            .slice(0, sourcePos.startLine - 1)\n            .map(l => l.length)\n            .reduce((p, n) => p + n, 0) + (sourcePos.startLine - 1) + sourcePos.startIndex,\n        to: sourceArr\n            .slice(0, sourcePos.endLine - 1)\n            .map(l => l.length)\n            .reduce((p, n) => p + n, 0) + (sourcePos.endLine - 1) + sourcePos.endIndex,\n    };\n    return range;\n}\n\nexport function sliceCodeFromSource(source, sourcePosStr) {\n    const range = getRange(source, sourcePosStr);\n    return source.slice(range.from - 1, range.to - 1);\n}\nexport function replaceCodeFromSource(source, sourcePosStr, replacement) {\n    const range = getRange(source, sourcePosStr);\n    return source.slice(0, range.from - 1) + replacement + source.slice(range.to - 1);\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport {\n    Button, Position, Popover, Menu, MenuItem, ButtonGroup\n} from '@blueprintjs/core';\nimport styles from './logDetail.module.css';\nimport AppFrame from 'component/appFrame';\nimport logService from 'service/log';\nimport logCommentService from 'service/logComment';\nimport LogComments from 'component/logComments';\nimport { AppToaster } from 'util/toaster';\nimport MarkdownPreview from 'component/markdownPreview';\nimport { sliceCodeFromSource, replaceCodeFromSource } from 'util/sourcePosUtil';\nimport names from 'classnames';\nimport Editor from 'component/logEditor';\n\n\nconst MODE = {\n    VIEW: '10001',\n    EDIT: '20001',\n    COMMENT: '30001',\n    APPEND: '40001',\n    COMMENT_EDIT: '50001',\n    PARTIAL_EDIT: '60001'\n};\n\nexport default function LogDetail() {\n    const h = useHistory();\n    const params = useParams();\n    const [logFlag, setLogFlag] = useState(false);\n    const [commentsFlag, setCommentsFlag] = useState(false);\n    const [logData, setLogData] = useState(null);\n    const [logCommentsData, setLogCommentsData] = useState([]);\n    const [editSource, setEditSource] = useState('');\n    const [commentRefId, setCommentRefId] = useState('');\n    const [posData, setPosData] = useState(null);\n    const [mode, setMode] = useState(MODE.VIEW);\n\n    useEffect(() => {\n        async function fetchData() {\n            const logInfo = await logService.get(params.id);\n            setLogData(logInfo);\n        }\n        fetchData();\n    }, [params.id, logFlag]);\n    useEffect(() => {\n        async function fetchData() {\n            const logCommentsInfo = await logCommentService.all(params.id);\n            setLogCommentsData(logCommentsInfo);\n        }\n        fetchData();\n    }, [params.id, commentsFlag]);\n\n    const viewAction = (\n        <Popover content={\n            <Menu>\n                <MenuItem\n                    icon=\"annotation\" text=\"Edit\"\n                    onClick={() => {\n                        setEditSource(logData.content);\n                        setMode(MODE.EDIT);\n                    }}\n                />\n                <MenuItem\n                    icon=\"add\" text=\"Append\"\n                    onClick={() => {\n                        setEditSource('');\n                        setMode(MODE.APPEND);\n                    }}\n                />\n                <MenuItem\n                    icon=\"comment\" text=\"Comment\"\n                    onClick={() => {\n                        setEditSource('');\n                        setCommentRefId('');\n                        setMode(MODE.COMMENT);\n                    }}\n                />\n                <Menu.Divider />\n                <MenuItem\n                    icon=\"delete\" intent=\"danger\" text=\"Delete\"\n                    onClick={() => {\n                        if (!window.confirm(\"Please confirm DELETE item.\")) return;\n                        logService.del(params.id)\n                            .then(() => {\n                                AppToaster.show({ timeout: 2000, message: '删除成功', intent: 'success' });\n                                h.goBack();\n                            })\n                            .catch(err => {\n                                alert(err.message);\n                            });\n                    }}\n                />\n            </Menu>\n        } position={Position.BOTTOM_RIGHT}>\n            <Button icon=\"cog\" text=\"Operation\" rightIcon=\"caret-down\" />\n        </Popover>\n    );\n    const editAction = (\n        <ButtonGroup>\n            <Button icon=\"undo\" text=\"Cancel\" onClick={() => {\n                setMode(MODE.VIEW);\n                setEditSource('');\n            }} />\n            <Button icon=\"confirm\" text=\"Confirm\" intent=\"primary\" onClick={() => {\n                logService.upd(params.id, {\n                    content: editSource\n                }).then(() => {\n                    setMode(MODE.VIEW);\n                    setEditSource('');\n                    setLogFlag(!logFlag);\n                });\n            }} />\n        </ButtonGroup>\n    );\n    const commentAction = (\n        <ButtonGroup>\n            <Button icon=\"undo\" text=\"Cancel\" onClick={() => {\n                setMode(MODE.VIEW);\n                setEditSource('');\n            }} />\n            <Button icon=\"confirm\" text=\"Confirm\" intent=\"primary\" onClick={() => {\n                logCommentService.add(params.id, {\n                    content: editSource\n                }).then(() => {\n                    setEditSource('');\n                    setCommentRefId('');\n                    setCommentsFlag(!commentsFlag);\n                    setMode(MODE.VIEW);\n                });\n            }} />\n        </ButtonGroup>\n    );\n    const appendAction = (\n        <ButtonGroup>\n            <Button icon=\"undo\" text=\"Cancel\" onClick={() => {\n                setMode(MODE.VIEW);\n                setEditSource('');\n            }} />\n            <Button icon=\"confirm\" text=\"Confirm\" intent=\"primary\" onClick={() => {\n                logService\n                    .upd(params.id, { content: logData.content + '\\n\\n' + editSource })\n                    .then(() => {\n                        setMode(MODE.VIEW);\n                        setEditSource('');\n                        setLogFlag(!logFlag);\n                    });\n            }} />\n        </ButtonGroup>\n    );\n    const commentEditAction = (\n        <ButtonGroup>\n            <Button icon=\"undo\" text=\"Cancel\" onClick={() => {\n                setMode(MODE.VIEW);\n                setEditSource('');\n                setCommentRefId('');\n            }} />\n            <Button icon=\"confirm\" text=\"Confirm\" intent=\"primary\" onClick={() => {\n                logCommentService\n                    .upd(commentRefId, { content: editSource })\n                    .then(() => {\n                        setMode(MODE.VIEW);\n                        setEditSource('');\n                        setCommentRefId('');\n                        setCommentsFlag(!commentsFlag);\n                    });\n            }} />\n        </ButtonGroup>\n    );\n    const partialEditAction = (\n        <ButtonGroup>\n            <Button icon=\"undo\" text=\"Cancel\" onClick={() => {\n                setMode(MODE.VIEW);\n                setEditSource('');\n                setCommentRefId('');\n            }} />\n            <Button icon=\"confirm\" text=\"Confirm\" intent=\"primary\" onClick={() => {\n                const source = replaceCodeFromSource(logData.content, posData, editSource);\n                logService\n                    .upd(params.id, { content: source })\n                    .then(() => {\n                        setMode(MODE.VIEW);\n                        setEditSource('');\n                        setLogFlag(!logFlag);\n                        setPosData(null);\n                    });\n            }} />\n        </ButtonGroup>\n    );\n    \n    return (\n        <AppFrame\n            actions={\n                (mode === MODE.APPEND && appendAction) ||\n                (mode === MODE.EDIT && editAction) ||\n                (mode === MODE.COMMENT && commentAction) ||\n                (mode === MODE.COMMENT_EDIT && commentEditAction) ||\n                (mode === MODE.PARTIAL_EDIT && partialEditAction) ||\n                viewAction\n            }\n        >\n            {\n                logData && logCommentsData &&\n                <div className={names(styles.container)}>\n                    <div className={styles.logContentBox}>\n                        <div className={styles.logContent}>\n                            <MarkdownPreview source={logData.content} selectAble onSelect={\n                                pos => {\n                                    const partial = sliceCodeFromSource(logData.content, pos);\n                                    setEditSource(partial);\n                                    setPosData(pos);\n                                    setMode(MODE.PARTIAL_EDIT);\n                                }\n                            } />\n                        </div>\n                    </div>\n                    <div className={styles.commentBox}>\n                        <div className={styles.commentContent}>\n                            <LogComments\n                                list={logCommentsData}\n                                onRequestUpdate={c => {\n                                    setEditSource(c.content);\n                                    setCommentRefId(c.id);\n                                    setMode(MODE.COMMENT_EDIT);\n                                }}\n                                onRequestDelete={cid => {\n                                    if (!window.confirm('Please confirm DELETE item.')) return;\n                                    logCommentService.del(cid)\n                                        .then(() => {\n                                            setCommentsFlag(!commentsFlag);\n                                        })\n                                        .catch(err => {\n                                            alert(err.message);\n                                        });\n                                }}\n                            />\n                        </div>\n                    </div>\n                </div>\n            }\n            {\n                mode !== MODE.VIEW && <div className={names(styles.editorOuter)}>\n                    <div className={styles.editorInner}>\n                        <Editor\n                            value={editSource}\n                            onChange={val => setEditSource(val)}\n                        />\n                    </div>\n                </div>\n            }\n        </AppFrame>\n    );\n}","import React from 'react';\nimport styles from './setting.module.css';\nimport AppFrame from 'component/appFrame';\nimport { RadioGroup, Radio, FormGroup, InputGroup, Card } from '@blueprintjs/core';\nimport { useState } from 'react';\n\nconst HERO_BOOK_SETTING_DATA_SOURCE = 'HERO_BOOK_SETTING_DATA_SOURCE';\nconst HERO_BOOK_SETTING_DATA_REMOTE_URL = 'HERO_BOOK_SETTING_DATA_REMOTE_URL';\nconst HERO_BOOK_SETTING_DATA_REMOTE_TOKEN = 'HERO_BOOK_SETTING_DATA_REMOTE_TOKEN';\nconst DATA_SOURCE_TYPES = {\n    LOCAL: '1',\n    REMOTE: '2'\n};\n\nexport default function SettingPage(props) {\n    const curr = window.localStorage.getItem(HERO_BOOK_SETTING_DATA_SOURCE);\n    const ru = window.localStorage.getItem(HERO_BOOK_SETTING_DATA_REMOTE_URL);\n    const rt = window.localStorage.getItem(HERO_BOOK_SETTING_DATA_REMOTE_TOKEN);\n    const [value, setValue] = useState(curr || '');\n    const [remoteUrl, setRemoteUrl] = useState(ru || '');\n    const [remoteToken, setRemoteToken] = useState(rt || '');\n    return (\n        <AppFrame>\n            <div className={styles.container}>\n            <RadioGroup\n                label=\"持久化方案：\"\n                selectedValue={value}\n                onChange={evt => {\n                    const v = evt.target.value;\n                    window.localStorage.setItem('HERO_BOOK_SETTING_DATA_SOURCE', v);\n                    setValue(v);\n                }}\n            >\n                <Radio label=\"本地数据库\" value={DATA_SOURCE_TYPES.LOCAL} />\n                <Radio label=\"远程数据库\" value={DATA_SOURCE_TYPES.REMOTE} />\n            </RadioGroup>\n            {\n                value === DATA_SOURCE_TYPES.REMOTE && <Card className={styles.indent}>\n                    <FormGroup\n                        inline\n                        label=\"接口地址\"\n                    >\n                        <InputGroup placeholder=\"请输入接口地址\" value={remoteUrl}\n                        onChange={evt => {\n                            const v = evt.target.value;\n                            window.localStorage.setItem(HERO_BOOK_SETTING_DATA_REMOTE_URL, v);\n                            setRemoteUrl(v);\n                        }} />\n                    </FormGroup>\n                    <FormGroup\n                        inline\n                        label=\"校验信息\"\n                    >\n                        <InputGroup placeholder=\"请输入校验信息\" value={remoteToken}\n                        onChange={evt => {\n                            const v = evt.target.value;\n                            window.localStorage.setItem(HERO_BOOK_SETTING_DATA_REMOTE_TOKEN, v);\n                            setRemoteToken(v);\n                        }} />\n                    </FormGroup>\n                </Card>\n            }\n            </div>\n        </AppFrame>\n    );\n}","import React from 'react';\nimport { HashRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\nimport AliaPage from './page/alia';\nimport LogPage from './page/log';\nimport LogCommentCreatePage from './page/logCommentCreate';\nimport LogCreatePage from './page/logCreate';\nimport LogDetailPage from './page/logDetail';\nimport LogSetting from './page/setting';\nimport 'normalize.css';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport '@blueprintjs/icons/lib/css/blueprint-icons.css';\nimport '@blueprintjs/datetime/lib/css/blueprint-datetime.css';\n// import 'github-markdown-css';\n\nfunction App() {\n    return (\n        <Router>\n            <Switch>\n                <Route path=\"/l/l\" component={LogPage} />\n                <Route path=\"/l/s\" component={LogSetting} />\n                <Route path=\"/l/d/:id\" component={LogDetailPage} />\n                <Route path=\"/l/a/:text\" component={AliaPage} />\n                <Route path=\"/l/ce/:id?\" component={LogCreatePage} />\n                <Route path=\"/l/lc/ce/:id/:cid?\" component={LogCommentCreatePage} />\n                <Redirect to=\"/l/a/m\" />\n            </Switch>\n        </Router>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logDetail_container__w0WFV\",\"logContentBox\":\"logDetail_logContentBox__2FBOS\",\"logContent\":\"logDetail_logContent__2q741\",\"commentBox\":\"logDetail_commentBox__2xmER\",\"commentContent\":\"logDetail_commentContent__2yOe-\",\"footerActions\":\"logDetail_footerActions__ax9Jf\",\"hide\":\"logDetail_hide__3XdPe\",\"editorOuter\":\"logDetail_editorOuter__1Gkc2\",\"editorInner\":\"logDetail_editorInner__37efe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"markdownBody\":\"markdownPreview_markdownBody__3D-P7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"appFrame_container__28Uto\",\"body\":\"appFrame_body__1wP9K\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logItem_container__1HQ_G\",\"metaBlock\":\"logItem_metaBlock__19X2m\",\"meta\":\"logItem_meta__JAOjF\",\"metaItem\":\"logItem_metaItem__37psE\",\"markdownBody\":\"logItem_markdownBody__1O-pH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"markdownEditor_container__1Bh7Q\",\"editorBox\":\"markdownEditor_editorBox__2jfkZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"setting_container__32Nic\",\"indent\":\"setting_indent__24ct8\"};"],"sourceRoot":""}