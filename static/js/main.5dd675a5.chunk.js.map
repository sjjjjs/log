{"version":3,"sources":["page sync nonrecursive //.js$","store/index.js","component/logComments/index.module.css","util/commonUtil.js","component/logComments/index.js","util/sourcePosUtil.js","component/markdownEditor/index.js","page/logDetail.js","App.js","serviceWorker.js","index.js","component/logItem/index.js","page/log.js","component/logCommentEditor/index.js","page/logCommentCreate.js","component/logEditor/index.js","page/logCreate.js","util/toaster.js","component/appFrame/index.js","component/normalNavigator/index.js","service/log.js","service/logComment.js","component/markdownPreview/index.js","page/logDetail.module.css","component/appFrame/index.module.css","component/logItem/index.module.css","component/markdownPreview/index.module.css","page/index.js","component/markdownEditor/index.module.css","page/log.module.css","page/logCommentCreate.module.css","component/logCommentEditor/index.module.css","page/logCreate.module.css","component/logEditor/index.module.css"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","db","Dexie","version","stores","logs","logComments","window","noop","LogComment","props","h","useHistory","c","comment","useState","visible","setVisible","isOpen","setIsOpen","className","styles","key","cancelButtonText","confirmButtonText","icon","intent","Intent","DANGER","onCancel","onConfirm","logCommentService","del","then","AppToaster","show","timeout","message","catch","err","alert","names","Classes","TEXT_MUTED","commentMeta","commentMetaBlock","commentMetaItem","datetime","time","locale","hoverVisible","TEXT_SMALL","onClick","push","commentContent","RUNNING_TEXT","source","content","LogComments","comments","list","REG","getRange","sourcePosStr","sourceArr","split","sourcePos","match","exec","startLine","Number","startIndex","endLine","endIndex","sourcePosParse","from","slice","l","length","reduce","p","n","to","value","onChange","placeholder","container","editorBox","fill","large","growVertically","evt","target","PartialEditDrawer","onClose","autoFocus","hasBackdrop","position","Position","BOTTOM","size","Drawer","SIZE_LARGE","DRAWER_BODY","style","backgroundColor","height","DIALOG_HEADER","display","width","margin","alignItems","minimal","DIALOG_CLOSE_BUTTON","DIALOG_BODY","val","NavigationActions","params","useParams","children","confirm","logService","goBack","component","flag","setFlag","logData","setLogData","logCommentsData","setLogCommentsData","partialEdit","setPartialEdit","isOpenPartialEditDrawer","setIsOpenPartialEditDrawer","partialSource","setPartialSource","posData","setPosData","useEffect","a","get","logInfo","all","logCommentsInfo","fetchData","header","showBack","title","actions","marginBottom","marginLeft","marginRight","label","checked","logContentBox","logContent","selectAble","onSelect","pos","partial","range","sliceCodeFromSource","commentBox","replacement","replaceCodeFromSource","upd","path","App","pages","Boolean","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","meta","date","elevation","Elevation","ONE","interactive","markdownBody","short","setlogs","fetch","exact","LogCommentEditor","cid","initState","setInitState","isNew","setIsNew","setValue","m","finally","add","Date","LogEditor","store","update","Toaster","create","TOP","body","footer","NormalNavigator","userSelect","align","delete","orderBy","toArray","reverse","logCommentInfo","lid","where","MarkdownPreview","sepIdx","indexOf","active","findTopLevelEle","HTMLElement","parentNode","pnode","parentElement","classList","contains","getAttribute","routes","pageCtx","require","forEach","route"],"mappings":"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","file":"static/js/main.5dd675a5.chunk.js","sourcesContent":["var map = {\n\t\"./index.js\": 64,\n\t\"./log.js\": 264,\n\t\"./logCommentCreate.js\": 265,\n\t\"./logCreate.js\": 266,\n\t\"./logDetail.js\": 262\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 148;","import Dexie from 'dexie';\n\nconst db = new Dexie('EfficientDatabase');\n\ndb.version(1).stores({\n    logs: '++id, content, time'\n});\n\ndb.version(2).stores({\n    logComments: '++id, content, time, lid'\n});\n\nexport default db;\nwindow.db = db;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comments\":\"logComments_comments__1LjH6\",\"comment\":\"logComments_comment__GP3sS\",\"hoverVisible\":\"logComments_hoverVisible__3EWGe\",\"commentTime\":\"logComments_commentTime__3ccqY\",\"commentMeta\":\"logComments_commentMeta__2p6gN\",\"commentMetaItem\":\"logComments_commentMetaItem__2-ZM7\"};","\nexport const noop = () => false;","/* eslint-disable jsx-a11y/anchor-is-valid  */\n\nimport React, { useState } from 'react';\nimport styles from './index.module.css';\nimport names from 'classnames';\nimport { Classes, Alert, Intent } from '@blueprintjs/core';\nimport TimeAgo from 'timeago-react';\nimport { useHistory } from 'react-router-dom';\nimport { AppToaster } from 'util/toaster';\nimport logCommentService from 'service/logComment';\nimport MarkdownPreview from 'component/markdownPreview';\n\nfunction LogComment(props) {\n    const h = useHistory();\n    const { comment: c, id } = props;\n    const [ visible, setVisible ] = useState(true);\n    const [ isOpen, setIsOpen ] = useState(false);\n    return (\n        visible && <div className={styles.comment} key={c.id}>\n            <Alert\n                cancelButtonText=\"取消\"\n                confirmButtonText=\"确定删除\"\n                icon=\"trash\"\n                intent={Intent.DANGER}\n                isOpen={isOpen}\n                onCancel={() => setIsOpen(false)}\n                onConfirm={() => {\n                    setIsOpen(false);\n                    logCommentService.del(c.id)\n                        .then(() => {\n                            setVisible(false);\n                            AppToaster.show({ timeout: 2000, message: '删除成功', intent: 'success' });\n                        })\n                        .catch(err => {\n                            alert(err.message);\n                        });\n                }}\n            >\n                你确定将此条记录删除吗？ 删除后无法再次找回，请确认操作。\n            </Alert>\n            <div className={names(Classes.TEXT_MUTED, styles.commentMeta)}>\n                <div className={styles.commentMetaBlock}>\n                    <span className={styles.commentMetaItem}><TimeAgo datetime={c.time} locale='zh_CN' /></span>\n                </div>\n                <div className={names(styles.commentMetaBlock, styles.hoverVisible)}>\n                    <a\n                        className={names(\n                            styles.commentMetaItem,\n                            Classes.TEXT_MUTED,\n                            Classes.TEXT_SMALL\n                        )}\n                        onClick={() => h.push(`/log.comment.createOrEdit/${id}/${c.id}`)}\n                    >\n                        修改\n                    </a>\n                    <a\n                        className={names(\n                            styles.commentMetaItem,\n                            Classes.TEXT_MUTED,\n                            Classes.TEXT_SMALL\n                        )}\n                        onClick={() => setIsOpen(true) }\n                    >\n                        删除\n                    </a>\n                </div>\n            </div>\n            <div className={names(styles.commentContent, Classes.RUNNING_TEXT)}>\n                <MarkdownPreview source={c.content} />\n            </div>\n        </div>\n    );\n}\n\nexport default function LogComments(props) {\n    return (\n        <div className={styles.comments}>\n            {\n                props.list && props.list.map(c => (\n                    <LogComment key={c.id} comment={c} id={props.id} />\n                ))\n            }\n        </div>\n    );\n}","\nconst REG = /(\\d+):(\\d+)-(\\d+):(\\d+)/;\n\nexport function sourcePosParse(sourcePosStr) {\n    const match = REG.exec(sourcePosStr);\n    if (!match) return null;\n    return {\n        startLine: Number(match[1]),\n        startIndex: Number(match[2]),\n        endLine: Number(match[3]),\n        endIndex: Number(match[4]),\n    }\n}\n\nexport function getRange(source, sourcePosStr) {\n    const sourceArr = source.split('\\n');\n    const sourcePos = sourcePosParse(sourcePosStr);\n    const range = {\n        from: sourceArr\n            .slice(0, sourcePos.startLine - 1)\n            .map(l => l.length)\n            .reduce((p, n) => p + n, 0) + (sourcePos.startLine - 1) + sourcePos.startIndex,\n        to: sourceArr\n            .slice(0, sourcePos.endLine - 1)\n            .map(l => l.length)\n            .reduce((p, n) => p + n, 0) + (sourcePos.endLine - 1) + sourcePos.endIndex,\n    };\n    return range;\n}\n\nexport function sliceCodeFromSource(source, sourcePosStr) {\n    const range = getRange(source, sourcePosStr);\n    return source.slice(range.from - 1, range.to - 1);\n}\nexport function replaceCodeFromSource(source, sourcePosStr, replacement) {\n    const range = getRange(source, sourcePosStr);\n    return source.slice(0, range.from - 1) + replacement + source.slice(range.to - 1);\n}","import React from 'react';\nimport styles from './index.module.css';\nimport { TextArea } from '@blueprintjs/core';\nimport { noop } from 'util/commonUtil';\n\nexport default function(props) {\n    const {\n        value = '',\n        onChange = noop,\n        placeholder = ''\n    } = props;\n    return (\n        <div className={styles.container}>\n            <div className={styles.editorBox}>\n                <TextArea\n                    fill large\n                    value={value}\n                    growVertically\n                    placeholder={placeholder}\n                    onChange={evt => onChange(evt.target.value)}\n                />\n            </div>\n        </div>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport {\n    Button, Classes, Switch, Drawer, Position, Icon, NavbarDivider, H5\n} from '@blueprintjs/core';\nimport styles from './logDetail.module.css';\nimport AppFrame from 'component/appFrame';\nimport logService from 'service/log';\nimport logCommentService from 'service/logComment';\nimport LogComments from 'component/logComments';\nimport { AppToaster } from 'util/toaster';\nimport MarkdownPreview from 'component/markdownPreview';\nimport { sliceCodeFromSource, replaceCodeFromSource } from 'util/sourcePosUtil';\nimport MarkdownEditor from 'component/markdownEditor';\nimport { noop } from 'util/commonUtil';\nimport NormalNavigator from 'component/normalNavigator';\n\nfunction PartialEditDrawer(props) {\n    const {\n        isOpen = false,\n        onClose = noop,\n        value = '',\n        onChange = noop,\n        onConfirm = noop\n    } = props;\n    return (\n        <Drawer\n            icon=\"annotation\"\n            autoFocus\n            hasBackdrop\n            isOpen={isOpen}\n            position={Position.BOTTOM}\n            size={Drawer.SIZE_LARGE}\n            onClose={onClose}\n            onConfirm={onConfirm}\n        >\n            <div className={Classes.DRAWER_BODY}>\n                <div style={{ backgroundColor: '#ebf1f5', height: '100%' }}>\n                    <div className={Classes.DIALOG_HEADER}>\n                        <div style={{\n                            display: 'flex',\n                            width: 640,\n                            margin: 'auto',\n                            alignItems: 'center'\n                        }}>\n                            <Icon icon=\"annotation\" />\n                            <H5>局部编辑</H5>\n                            <Button\n                                minimal\n                                icon=\"confirm\"\n                                intent=\"primary\"\n                                className={Classes.DIALOG_CLOSE_BUTTON}\n                                onClick={onConfirm}\n                            >\n                                提交\n                            </Button>\n                        </div>\n                    </div>\n                    <div className={Classes.DIALOG_BODY}>\n                        <MarkdownEditor\n                            value={value}\n                            onChange={val => onChange(val)}\n                        />\n                    </div>\n                </div>\n            </div>\n        </Drawer>\n    );\n}\n\nconst NavigationActions = props => {\n    const h = useHistory();\n    const params = useParams();\n    return (\n        < >\n            <Button icon=\"comment\" minimal onClick={() => h.push(`/log.comment.createOrEdit/${params.id}`)}>评论</Button>\n            <NavbarDivider />\n            <Button icon=\"annotation\" minimal onClick={() => h.push(`/log.createOrEdit/${params.id}`)}>修改</Button>\n            { props.children }\n            <NavbarDivider />\n            <Button icon=\"delete\" intent=\"danger\" minimal onClick={() => {\n                if (!window.confirm(\"确认删除？\")) return;\n                logService.del(params.id)\n                    .then(() => {\n                        AppToaster.show({ timeout: 2000, message: '删除成功', intent: 'success' });\n                        h.goBack();\n                    })\n                    .catch(err => {\n                        alert(err.message);\n                    });\n            }}>删除</Button>\n        </>\n    );\n};\n\nfunction LogDetail(props) {\n    const params = useParams();\n    const [flag, setFlag] = useState(false);\n    const [logData, setLogData] = useState(null);\n    const [logCommentsData, setLogCommentsData] = useState([]);\n    const [partialEdit, setPartialEdit] = useState(false);\n    const [isOpenPartialEditDrawer, setIsOpenPartialEditDrawer] = useState(false);\n    const [partialSource, setPartialSource] = useState('');\n    const [posData, setPosData] = useState(null);\n    useEffect(() => {\n        async function fetchData() {\n            const logInfo = await logService.get(params.id);\n            const logCommentsInfo = await logCommentService.all(params.id);\n            setLogData(logInfo);\n            setLogCommentsData(logCommentsInfo);\n        }\n        fetchData();\n    }, [params.id, flag]);\n    return (\n        <AppFrame\n            header={\n                <NormalNavigator\n                    showBack\n                    title=\"英雄·日志详情\"\n                    actions={\n                        <NavigationActions>\n                            <Switch style={{ marginBottom: 0, marginLeft: 5, marginRight: 5 }}\n                                label=\"局部修改\" checked={partialEdit} onChange={() => setPartialEdit(!partialEdit)}/>\n                        </NavigationActions>\n                    }\n                />\n            }\n        >\n            <div className={styles.container}>\n                {\n                    logData && <div className={styles.logContentBox}>\n                        <div className={styles.logContent}>\n                            <MarkdownPreview source={logData.content} selectAble={partialEdit} onSelect={\n                                pos => {\n                                    const partial = sliceCodeFromSource(logData.content, pos);\n                                    setIsOpenPartialEditDrawer(true);\n                                    setPartialSource(partial);\n                                    setPosData(pos);\n                                }\n                            } />\n                        </div>\n                    </div>\n                }\n\n                <div className={styles.commentBox}>\n                    <div className={styles.commentContent}>\n                        <LogComments list={logCommentsData} id={params.id} />\n                    </div>\n                </div>\n            </div>\n            <PartialEditDrawer\n                isOpen={isOpenPartialEditDrawer}\n                onClose={() => {\n                    setIsOpenPartialEditDrawer(false);\n                }}\n                onConfirm={() => {\n                    setIsOpenPartialEditDrawer(false);\n                    const source = replaceCodeFromSource(logData.content, posData, partialSource);\n                    logService\n                        .upd(logData.id, { content: source })\n                        .then(() => setFlag(!flag));\n                }}\n                value={partialSource}\n                onChange={val => setPartialSource(val)}\n            />\n        </AppFrame>\n    );\n}\n\nexport const component = LogDetail;\nexport const path = '/log.detail/:id';","import React from 'react';\nimport { HashRouter as Router } from 'react-router-dom';\nimport pages from './page';\nimport 'normalize.css';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport '@blueprintjs/icons/lib/css/blueprint-icons.css';\nimport 'github-markdown-css';\n\nfunction App() {\n    return (\n        <Router>{pages}</Router>\n    );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/* eslint-disable jsx-a11y/anchor-is-valid  */\n\nimport React, { useState } from 'react';\nimport TimeAgo from 'timeago-react';\nimport { useHistory } from 'react-router-dom';\nimport { Card, Classes, Alert, Intent, Elevation } from '@blueprintjs/core';\nimport names from 'classnames';\nimport styles from './index.module.css';\nimport MarkdownPreview from 'component/markdownPreview';\nimport { AppToaster } from 'util/toaster';\nimport logService from 'service/log';\n\nexport default function (props) {\n    const h = useHistory();\n    const [ visible, setVisible ] = useState(true);\n    const [ isOpen, setIsOpen ] = useState(false);\n    return (\n        visible && <div className={styles.container}>\n            <Alert\n                cancelButtonText=\"取消\"\n                confirmButtonText=\"确定删除\"\n                icon=\"trash\"\n                intent={Intent.DANGER}\n                isOpen={isOpen}\n                onCancel={() => setIsOpen(false)}\n                onConfirm={() => {\n                    setIsOpen(false);\n                    logService.del(props.id)\n                        .then(() => {\n                            setVisible(false);\n                            AppToaster.show({ timeout: 2000, message: '删除成功', intent: 'success' });\n                        })\n                        .catch(err => {\n                            alert(err.message);\n                        });\n                }}\n            >\n                你确定将此条记录删除吗？ 删除后无法再次找回，请确认操作。\n            </Alert>\n            <div className={styles.meta}>\n                <span className={names(Classes.TEXT_MUTED, Classes.TEXT_SMALL)}>\n                    <TimeAgo datetime={props.date} locale='zh_CN' />\n                </span>\n            </div>\n            <Card elevation={Elevation.ONE} interactive onClick={() => h.push(`/log.detail/${props.id}`)}>\n                <div className={names(\"markdown-body\", styles.markdownBody)}>\n                    <MarkdownPreview source={props.children} short />\n                </div>\n            </Card>\n        </div>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Button } from '@blueprintjs/core';\nimport styles from './log.module.css';\nimport LogItem from 'component/logItem';\nimport AppFrame from 'component/appFrame';\nimport logService from 'service/log';\nimport NormalNavigator from 'component/normalNavigator';\n\n\nfunction Log() {\n    const h = useHistory();\n    const [logs, setlogs] = useState([]);\n    useEffect(() => {\n        async function fetch() {\n            const list = await logService.all();\n            setlogs(list);\n        }\n        fetch();\n    }, []);\n    return (\n        <AppFrame header={\n            <NormalNavigator title=\"英雄·日志\" actions={\n                <Button\n                    minimal intent=\"primary\" icon=\"annotation\"\n                    onClick={() => h.push('/log.createOrEdit')}\n                >创建日志</Button>\n            } />\n        }>\n            <div className={styles.container}>\n                {\n                    logs.map(message => (\n                        <LogItem\n                            key={message.id}\n                            id={message.id}\n                            date={message.time}\n                        >{message.content}</LogItem>\n                    ))\n                }\n            </div>\n        </AppFrame>\n    );\n}\n\nexport const component = Log;\nexport const path = '/log';\nexport const exact = true;","import React from 'react';\nimport { Card, TextArea } from '@blueprintjs/core';\nimport styles from './index.module.css';\nimport { noop } from 'util/commonUtil';\n\nexport default function LogCommentEditor (props) {\n    const { value = '', onChange = noop, placeholder = '' } = props;\n\n    return (\n        <div className={styles.container}>\n            <Card>\n                <TextArea\n                    fill\n                    large\n                    value={value}\n                    growVertically\n                    placeholder={placeholder}\n                    onChange={evt => onChange(evt.target.value)}\n                />\n            </Card>\n        </div>\n    );\n}","import React, { useState, useEffect} from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { Button } from '@blueprintjs/core';\nimport styles from './logCommentCreate.module.css';\nimport LogCommentEditor from 'component/logCommentEditor';\nimport AppFrame from 'component/appFrame';\nimport NormalNavigation from 'component/normalNavigator';\nimport logCommentService from 'service/logComment';\n\nfunction LogCommentCreate() {\n    const params = useParams();\n    const { id = null, cid = null } = params;\n    const [ initState, setInitState ] = useState(false);\n    const [ isNew, setIsNew ] = useState(true);\n    const [ value, setValue ] = useState('');\n    const h = useHistory();\n\n    useEffect(() => {\n        (async function() {\n            if (!cid) {\n                setInitState(true);\n                return;\n            };\n            logCommentService.get(cid)\n                .then(m => {\n                    m && setValue(m.content);\n                    setIsNew(false);\n                })\n                .finally(() => {\n                    setInitState(true);\n                });\n        })();\n    }, [ cid ]);\n    return (\n        <AppFrame header={\n            <NormalNavigation showBack title=\"编辑日志评论\" actions={\n                <Button minimal icon=\"confirm\" intent=\"primary\" onClick={() => {\n                    let process;\n                    if (isNew) {\n                        process = logCommentService.add(id, {\n                            time: new Date(),\n                            content: value\n                        });\n                    } else {\n                        process = logCommentService.upd(cid, {\n                            content: value\n                        });\n                    }\n                    process.then(() => {\n                        h.goBack();\n                    }).catch(err => {\n                        alert(err.message);\n                    });\n                }}>提交</Button>\n            } />\n        }>\n            <div className={styles.container}>\n                {\n                    initState && <LogCommentEditor\n                        value={value}\n                        onChange={val => setValue(val)}\n                        placeholder=\"请从此出开始...\"\n                    />\n                }\n            </div>\n        </AppFrame>\n    );\n}\n\nexport const component = LogCommentCreate;\nexport const path = '/log.comment.createOrEdit/:id/:cid?';","import React from 'react';\nimport { Card, TextArea } from '@blueprintjs/core';\nimport styles from './index.module.css';\nimport { noop } from 'util/commonUtil';\n\nexport default function LogEditor(props) {\n    const { value = '', onChange = noop, placeholder = '' } = props;\n    return (\n        <div className={styles.container}>\n            <Card>\n                <TextArea\n                    fill\n                    large\n                    value={value}\n                    growVertically\n                    placeholder={placeholder}\n                    onChange={evt => onChange(evt.target.value)}\n                />\n            </Card>\n        </div>\n    );\n}","import React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { Button } from '@blueprintjs/core';\nimport styles from './logCreate.module.css';\nimport LogEditor from 'component/logEditor';\nimport AppFrame from 'component/appFrame';\nimport NormalNavigator from 'component/normalNavigator';\nimport store from 'store';\nimport { AppToaster } from 'util/toaster';\n\nfunction LogCreate() {\n    const h = useHistory();\n    const params = useParams();\n    const { id = null } = params;\n    const [ initState, setInitState ] = useState(false);\n    const [ isNew, setIsNew ] = useState(true);\n    const [ value, setValue ] = useState('');\n\n    useEffect(() => {\n        (async function() {\n            if (!id) {\n                setInitState(true);\n                return;\n            };\n            store.logs.get(Number(id))\n                .then(m => {\n                    m && setValue(m.content);\n                    setIsNew(false);\n                })\n                .finally(() => {\n                    setInitState(true);\n                });\n        })();\n    }, [ id ]);\n    return (\n        <AppFrame header={\n            <NormalNavigator showBack title=\"编辑日志\" actions={\n                <Button minimal intent=\"primary\" icon=\"confirm\" onClick={() => {\n                    let process;\n                    if (isNew) {\n                        process = store.logs.add({\n                            time: new Date(),\n                            content: value\n                        });\n                    } else {\n                        process = store.logs.update(Number(id), {\n                            content: value\n                        });\n                    }\n                    process.then(() => {\n                        h.goBack();\n                    }).catch(err => {\n                        AppToaster.show({ timeout: 2000, message: err.message, intent: 'error' });\n                    });\n                }}>提交</Button>\n            } />\n        }>\n            <div className={styles.container}>\n                {\n                    initState && <LogEditor\n                        value={value}\n                        onChange={val => setValue(val)}\n                        placeholder=\"请由此开始...\"\n                    />\n                }\n            </div>\n        </AppFrame>\n    );\n}\n\nexport const component = LogCreate;\nexport const path = '/log.createOrEdit/:id?';","import { Position, Toaster } from \"@blueprintjs/core\";\n \n\nexport const AppToaster = Toaster.create({\n    className: \"recipe-toaster\",\n    position: Position.TOP\n});","import React from 'react';\nimport styles from './index.module.css';\n\nexport default function(props) {\n    return (\n        <div className={styles.container}>\n            { props.header && <div className={styles.header}>{props.header}</div> }\n            <div className={styles.body}>{props.children}</div>\n            { props.footer && <div className={styles.footer}>{props.footer}</div> }\n        </div>\n    );\n}","\nimport React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n    Navbar, NavbarGroup, Button, NavbarHeading, NavbarDivider\n} from '@blueprintjs/core';\n\nexport default function NormalNavigator(props) {\n    const { showBack = false, title = '', actions = [] } = props;\n    const h = useHistory();\n    return (\n        <Navbar style={{ userSelect: 'none'}}>\n            <div style={{width: '640px', margin: 'auto'}}>\n                <NavbarGroup align=\"left\">\n                    {\n                        showBack && <>\n                            <Button\n                                onClick={() => h.goBack()}\n                                icon=\"chevron-left\"\n                                minimal\n                            >返回</Button>\n                            <NavbarDivider />\n                        </>\n                    }\n                    {\n                        title !== '' && <NavbarHeading>{title}</NavbarHeading>\n                    }\n                </NavbarGroup>\n                <NavbarGroup align=\"right\">\n                    {actions}\n                </NavbarGroup>\n            </div>\n        </Navbar>\n    );\n}","import store from 'store/index';\n\nconst get = (id) => store.logs.get(Number(id));\n\nconst add = (logInfo) => store.logs.add(logInfo);\n\nconst del = (id) => store.logs.delete(Number(id));\n\nconst upd = (id, logInfo) => store.logs.update(Number(id), logInfo);\n\nconst all = () => store.logs.orderBy('time').toArray().then(l => l.reverse());\n\nexport default {\n    get, add, del, upd, all\n}","import store from 'store/index';\n\nconst get = (id) => store.logComments.get(Number(id));\n\nconst add = (id, logCommentInfo) => store.logComments.add({...logCommentInfo, lid: id});\n\nconst del = (id) => store.logComments.delete(Number(id));\n\nconst upd = (id, logCommentInfo) => store.logComments.update(Number(id), logCommentInfo);\n\nconst all = (id) => store.logComments.where({ lid: id }).toArray();\n\nexport default {\n    get, add, del, upd, all\n}","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport names from 'classnames';\nimport styles from './index.module.css';\n\nconst SEGMENT = '---\\n';\n\nfunction findTopLevelEle(target) {\n    if (!(target instanceof HTMLElement)) return null;\n    if (!(target.parentNode instanceof HTMLElement)) return null;\n    const pnode = target.parentElement;\n    if (pnode.classList.contains(styles.markdownBody)) {\n        return target;\n    }\n    return findTopLevelEle(pnode);\n}\n\nexport default function MarkdownPreview(props) {\n    const { source = '', className, selectAble = false } = props;\n    const sepIdx = source.indexOf(SEGMENT);\n    const title = sepIdx > 0 ? source.slice(0, sepIdx) : '';\n    return (\n        <div\n            className={names(\n                \"markdown-body\",\n                className,\n                styles.markdownBody,\n                selectAble ? styles.active : ''\n            )}\n            onClick={evt => {\n                if (!props.selectAble || typeof props.onSelect !== 'function') return;\n                const el = findTopLevelEle(evt.target);\n                const sourcePosStr = el.getAttribute('data-sourcePos');\n                props.onSelect(sourcePosStr);\n            }}\n        >\n            <ReactMarkdown\n                source={props.short ? (title || source) : source}\n                sourcePos={selectAble}\n            />\n        </div>\n    );\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logDetail_container__w0WFV\",\"logContentBox\":\"logDetail_logContentBox__2FBOS\",\"logContent\":\"logDetail_logContent__2q741\",\"commentBox\":\"logDetail_commentBox__2xmER\",\"commentContent\":\"logDetail_commentContent__2yOe-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"appFrame_container__28Uto\",\"header\":\"appFrame_header__VXnlL\",\"body\":\"appFrame_body__1wP9K\",\"footer\":\"appFrame_footer__PUQHy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logItem_container__1HQ_G\",\"metaBlock\":\"logItem_metaBlock__19X2m\",\"meta\":\"logItem_meta__JAOjF\",\"metaItem\":\"logItem_metaItem__37psE\",\"markdownBody\":\"logItem_markdownBody__1O-pH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"markdownBody\":\"markdownPreview_markdownBody__3D-P7\"};","import React from 'react';\nimport { Route } from 'react-router-dom';\n\nconst routes = [];\nconst pageCtx = require.context('.', false, /\\.js$/);\n\npageCtx.keys().forEach(key => {\n    if (key === './index.js') return;\n    const route = pageCtx(key);\n    routes.push(<Route {...route} key={key} />);\n});\n\nexport default routes;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"markdownEditor_container__1Bh7Q\",\"editorBox\":\"markdownEditor_editorBox__2jfkZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"log_container__1snyH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logCommentCreate_container__3qGs1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"logCommentEditor_textarea__ltzcQ\",\"container\":\"logCommentEditor_container__3s0iH\",\"buttonWrap\":\"logCommentEditor_buttonWrap__o5tot\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"logCreate_container__19vSt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"logEditor_textarea__28vya\",\"container\":\"logEditor_container__1GeHV\",\"buttonWrap\":\"logEditor_buttonWrap__1W5No\"};"],"sourceRoot":""}